!function(n){var t={};function e(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return n[r].call(a.exports,a,a.exports,e),a.l=!0,a.exports}e.m=n,e.c=t,e.d=function(n,t,r){e.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:r})},e.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,t){if(1&t&&(n=e(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var a in n)e.d(r,a,function(t){return n[t]}.bind(null,a));return r},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},e.p="",e(e.s=17)}([function(n,t,e){"use strict";e.r(t);var r={};e.r(r),e.d(r,"EPSILON",function(){return m}),e.d(r,"ARRAY_TYPE",function(){return h}),e.d(r,"RANDOM",function(){return v}),e.d(r,"setMatrixArrayType",function(){return p}),e.d(r,"toRadian",function(){return M}),e.d(r,"equals",function(){return _});var a={};e.r(a),e.d(a,"create",function(){return b}),e.d(a,"clone",function(){return x}),e.d(a,"copy",function(){return R}),e.d(a,"identity",function(){return S}),e.d(a,"fromValues",function(){return y}),e.d(a,"set",function(){return E}),e.d(a,"transpose",function(){return A}),e.d(a,"invert",function(){return T}),e.d(a,"adjoint",function(){return w}),e.d(a,"determinant",function(){return L}),e.d(a,"multiply",function(){return I}),e.d(a,"rotate",function(){return U}),e.d(a,"scale",function(){return C}),e.d(a,"fromRotation",function(){return P}),e.d(a,"fromScaling",function(){return D}),e.d(a,"str",function(){return O}),e.d(a,"frob",function(){return F}),e.d(a,"LDU",function(){return k}),e.d(a,"add",function(){return B}),e.d(a,"subtract",function(){return q}),e.d(a,"exactEquals",function(){return N}),e.d(a,"equals",function(){return V}),e.d(a,"multiplyScalar",function(){return X}),e.d(a,"multiplyScalarAndAdd",function(){return j}),e.d(a,"mul",function(){return H}),e.d(a,"sub",function(){return G});var o={};e.r(o),e.d(o,"create",function(){return z}),e.d(o,"clone",function(){return Q}),e.d(o,"copy",function(){return Y}),e.d(o,"identity",function(){return W}),e.d(o,"fromValues",function(){return Z}),e.d(o,"set",function(){return $}),e.d(o,"invert",function(){return K}),e.d(o,"determinant",function(){return J}),e.d(o,"multiply",function(){return nn}),e.d(o,"rotate",function(){return tn}),e.d(o,"scale",function(){return en}),e.d(o,"translate",function(){return rn}),e.d(o,"fromRotation",function(){return an}),e.d(o,"fromScaling",function(){return on}),e.d(o,"fromTranslation",function(){return un}),e.d(o,"str",function(){return sn}),e.d(o,"frob",function(){return cn}),e.d(o,"add",function(){return fn}),e.d(o,"subtract",function(){return dn}),e.d(o,"multiplyScalar",function(){return ln}),e.d(o,"multiplyScalarAndAdd",function(){return mn}),e.d(o,"exactEquals",function(){return hn}),e.d(o,"equals",function(){return vn}),e.d(o,"mul",function(){return pn}),e.d(o,"sub",function(){return gn});var i={};e.r(i),e.d(i,"create",function(){return Mn}),e.d(i,"fromMat4",function(){return _n}),e.d(i,"clone",function(){return bn}),e.d(i,"copy",function(){return xn}),e.d(i,"fromValues",function(){return Rn}),e.d(i,"set",function(){return Sn}),e.d(i,"identity",function(){return yn}),e.d(i,"transpose",function(){return En}),e.d(i,"invert",function(){return An}),e.d(i,"adjoint",function(){return Tn}),e.d(i,"determinant",function(){return wn}),e.d(i,"multiply",function(){return Ln}),e.d(i,"translate",function(){return In}),e.d(i,"rotate",function(){return Un}),e.d(i,"scale",function(){return Cn}),e.d(i,"fromTranslation",function(){return Pn}),e.d(i,"fromRotation",function(){return Dn}),e.d(i,"fromScaling",function(){return On}),e.d(i,"fromMat2d",function(){return Fn}),e.d(i,"fromQuat",function(){return kn}),e.d(i,"normalFromMat4",function(){return Bn}),e.d(i,"projection",function(){return qn}),e.d(i,"str",function(){return Nn}),e.d(i,"frob",function(){return Vn}),e.d(i,"add",function(){return Xn}),e.d(i,"subtract",function(){return jn}),e.d(i,"multiplyScalar",function(){return Hn}),e.d(i,"multiplyScalarAndAdd",function(){return Gn}),e.d(i,"exactEquals",function(){return zn}),e.d(i,"equals",function(){return Qn}),e.d(i,"mul",function(){return Yn}),e.d(i,"sub",function(){return Wn});var u={};e.r(u),e.d(u,"create",function(){return Zn}),e.d(u,"clone",function(){return $n}),e.d(u,"copy",function(){return Kn}),e.d(u,"fromValues",function(){return Jn}),e.d(u,"set",function(){return nt}),e.d(u,"identity",function(){return tt}),e.d(u,"transpose",function(){return et}),e.d(u,"invert",function(){return rt}),e.d(u,"adjoint",function(){return at}),e.d(u,"determinant",function(){return ot}),e.d(u,"multiply",function(){return it}),e.d(u,"translate",function(){return ut}),e.d(u,"scale",function(){return st}),e.d(u,"rotate",function(){return ct}),e.d(u,"rotateX",function(){return ft}),e.d(u,"rotateY",function(){return dt}),e.d(u,"rotateZ",function(){return lt}),e.d(u,"fromTranslation",function(){return mt}),e.d(u,"fromScaling",function(){return ht}),e.d(u,"fromRotation",function(){return vt}),e.d(u,"fromXRotation",function(){return pt}),e.d(u,"fromYRotation",function(){return gt}),e.d(u,"fromZRotation",function(){return Mt}),e.d(u,"fromRotationTranslation",function(){return _t}),e.d(u,"fromQuat2",function(){return bt}),e.d(u,"getTranslation",function(){return xt}),e.d(u,"getScaling",function(){return Rt}),e.d(u,"getRotation",function(){return St}),e.d(u,"fromRotationTranslationScale",function(){return yt}),e.d(u,"fromRotationTranslationScaleOrigin",function(){return Et}),e.d(u,"fromQuat",function(){return At}),e.d(u,"frustum",function(){return Tt}),e.d(u,"perspective",function(){return wt}),e.d(u,"perspectiveFromFieldOfView",function(){return Lt}),e.d(u,"ortho",function(){return It}),e.d(u,"lookAt",function(){return Ut}),e.d(u,"targetTo",function(){return Ct}),e.d(u,"str",function(){return Pt}),e.d(u,"frob",function(){return Dt}),e.d(u,"add",function(){return Ot}),e.d(u,"subtract",function(){return Ft}),e.d(u,"multiplyScalar",function(){return kt}),e.d(u,"multiplyScalarAndAdd",function(){return Bt}),e.d(u,"exactEquals",function(){return qt}),e.d(u,"equals",function(){return Nt}),e.d(u,"mul",function(){return Vt}),e.d(u,"sub",function(){return Xt});var s={};e.r(s),e.d(s,"create",function(){return jt}),e.d(s,"clone",function(){return Ht}),e.d(s,"length",function(){return Gt}),e.d(s,"fromValues",function(){return zt}),e.d(s,"copy",function(){return Qt}),e.d(s,"set",function(){return Yt}),e.d(s,"add",function(){return Wt}),e.d(s,"subtract",function(){return Zt}),e.d(s,"multiply",function(){return $t}),e.d(s,"divide",function(){return Kt}),e.d(s,"ceil",function(){return Jt}),e.d(s,"floor",function(){return ne}),e.d(s,"min",function(){return te}),e.d(s,"max",function(){return ee}),e.d(s,"round",function(){return re}),e.d(s,"scale",function(){return ae}),e.d(s,"scaleAndAdd",function(){return oe}),e.d(s,"distance",function(){return ie}),e.d(s,"squaredDistance",function(){return ue}),e.d(s,"squaredLength",function(){return se}),e.d(s,"negate",function(){return ce}),e.d(s,"inverse",function(){return fe}),e.d(s,"normalize",function(){return de}),e.d(s,"dot",function(){return le}),e.d(s,"cross",function(){return me}),e.d(s,"lerp",function(){return he}),e.d(s,"hermite",function(){return ve}),e.d(s,"bezier",function(){return pe}),e.d(s,"random",function(){return ge}),e.d(s,"transformMat4",function(){return Me}),e.d(s,"transformMat3",function(){return _e}),e.d(s,"transformQuat",function(){return be}),e.d(s,"rotateX",function(){return xe}),e.d(s,"rotateY",function(){return Re}),e.d(s,"rotateZ",function(){return Se}),e.d(s,"angle",function(){return ye}),e.d(s,"zero",function(){return Ee}),e.d(s,"str",function(){return Ae}),e.d(s,"exactEquals",function(){return Te}),e.d(s,"equals",function(){return we}),e.d(s,"sub",function(){return Ie}),e.d(s,"mul",function(){return Ue}),e.d(s,"div",function(){return Ce}),e.d(s,"dist",function(){return Pe}),e.d(s,"sqrDist",function(){return De}),e.d(s,"len",function(){return Oe}),e.d(s,"sqrLen",function(){return Fe}),e.d(s,"forEach",function(){return ke});var c={};e.r(c),e.d(c,"create",function(){return Be}),e.d(c,"clone",function(){return qe}),e.d(c,"fromValues",function(){return Ne}),e.d(c,"copy",function(){return Ve}),e.d(c,"set",function(){return Xe}),e.d(c,"add",function(){return je}),e.d(c,"subtract",function(){return He}),e.d(c,"multiply",function(){return Ge}),e.d(c,"divide",function(){return ze}),e.d(c,"ceil",function(){return Qe}),e.d(c,"floor",function(){return Ye}),e.d(c,"min",function(){return We}),e.d(c,"max",function(){return Ze}),e.d(c,"round",function(){return $e}),e.d(c,"scale",function(){return Ke}),e.d(c,"scaleAndAdd",function(){return Je}),e.d(c,"distance",function(){return nr}),e.d(c,"squaredDistance",function(){return tr}),e.d(c,"length",function(){return er}),e.d(c,"squaredLength",function(){return rr}),e.d(c,"negate",function(){return ar}),e.d(c,"inverse",function(){return or}),e.d(c,"normalize",function(){return ir}),e.d(c,"dot",function(){return ur}),e.d(c,"cross",function(){return sr}),e.d(c,"lerp",function(){return cr}),e.d(c,"random",function(){return fr}),e.d(c,"transformMat4",function(){return dr}),e.d(c,"transformQuat",function(){return lr}),e.d(c,"zero",function(){return mr}),e.d(c,"str",function(){return hr}),e.d(c,"exactEquals",function(){return vr}),e.d(c,"equals",function(){return pr}),e.d(c,"sub",function(){return gr}),e.d(c,"mul",function(){return Mr}),e.d(c,"div",function(){return _r}),e.d(c,"dist",function(){return br}),e.d(c,"sqrDist",function(){return xr}),e.d(c,"len",function(){return Rr}),e.d(c,"sqrLen",function(){return Sr}),e.d(c,"forEach",function(){return yr});var f={};e.r(f),e.d(f,"create",function(){return Er}),e.d(f,"identity",function(){return Ar}),e.d(f,"setAxisAngle",function(){return Tr}),e.d(f,"getAxisAngle",function(){return wr}),e.d(f,"getAngle",function(){return Lr}),e.d(f,"multiply",function(){return Ir}),e.d(f,"rotateX",function(){return Ur}),e.d(f,"rotateY",function(){return Cr}),e.d(f,"rotateZ",function(){return Pr}),e.d(f,"calculateW",function(){return Dr}),e.d(f,"exp",function(){return Or}),e.d(f,"ln",function(){return Fr}),e.d(f,"pow",function(){return kr}),e.d(f,"slerp",function(){return Br}),e.d(f,"random",function(){return qr}),e.d(f,"invert",function(){return Nr}),e.d(f,"conjugate",function(){return Vr}),e.d(f,"fromMat3",function(){return Xr}),e.d(f,"fromEuler",function(){return jr}),e.d(f,"str",function(){return Hr}),e.d(f,"clone",function(){return $r}),e.d(f,"fromValues",function(){return Kr}),e.d(f,"copy",function(){return Jr}),e.d(f,"set",function(){return na}),e.d(f,"add",function(){return ta}),e.d(f,"mul",function(){return ea}),e.d(f,"scale",function(){return ra}),e.d(f,"dot",function(){return aa}),e.d(f,"lerp",function(){return oa}),e.d(f,"length",function(){return ia}),e.d(f,"len",function(){return ua}),e.d(f,"squaredLength",function(){return sa}),e.d(f,"sqrLen",function(){return ca}),e.d(f,"normalize",function(){return fa}),e.d(f,"exactEquals",function(){return da}),e.d(f,"equals",function(){return la}),e.d(f,"rotationTo",function(){return ma}),e.d(f,"sqlerp",function(){return ha}),e.d(f,"setAxes",function(){return va});var d={};e.r(d),e.d(d,"create",function(){return pa}),e.d(d,"clone",function(){return ga}),e.d(d,"fromValues",function(){return Ma}),e.d(d,"fromRotationTranslationValues",function(){return _a}),e.d(d,"fromRotationTranslation",function(){return ba}),e.d(d,"fromTranslation",function(){return xa}),e.d(d,"fromRotation",function(){return Ra}),e.d(d,"fromMat4",function(){return Sa}),e.d(d,"copy",function(){return ya}),e.d(d,"identity",function(){return Ea}),e.d(d,"set",function(){return Aa}),e.d(d,"getReal",function(){return Ta}),e.d(d,"getDual",function(){return wa}),e.d(d,"setReal",function(){return La}),e.d(d,"setDual",function(){return Ia}),e.d(d,"getTranslation",function(){return Ua}),e.d(d,"translate",function(){return Ca}),e.d(d,"rotateX",function(){return Pa}),e.d(d,"rotateY",function(){return Da}),e.d(d,"rotateZ",function(){return Oa}),e.d(d,"rotateByQuatAppend",function(){return Fa}),e.d(d,"rotateByQuatPrepend",function(){return ka}),e.d(d,"rotateAroundAxis",function(){return Ba}),e.d(d,"add",function(){return qa}),e.d(d,"multiply",function(){return Na}),e.d(d,"mul",function(){return Va}),e.d(d,"scale",function(){return Xa}),e.d(d,"dot",function(){return ja}),e.d(d,"lerp",function(){return Ha}),e.d(d,"invert",function(){return Ga}),e.d(d,"conjugate",function(){return za}),e.d(d,"length",function(){return Qa}),e.d(d,"len",function(){return Ya}),e.d(d,"squaredLength",function(){return Wa}),e.d(d,"sqrLen",function(){return Za}),e.d(d,"normalize",function(){return $a}),e.d(d,"str",function(){return Ka}),e.d(d,"exactEquals",function(){return Ja}),e.d(d,"equals",function(){return no});var l={};e.r(l),e.d(l,"create",function(){return to}),e.d(l,"clone",function(){return eo}),e.d(l,"fromValues",function(){return ro}),e.d(l,"copy",function(){return ao}),e.d(l,"set",function(){return oo}),e.d(l,"add",function(){return io}),e.d(l,"subtract",function(){return uo}),e.d(l,"multiply",function(){return so}),e.d(l,"divide",function(){return co}),e.d(l,"ceil",function(){return fo}),e.d(l,"floor",function(){return lo}),e.d(l,"min",function(){return mo}),e.d(l,"max",function(){return ho}),e.d(l,"round",function(){return vo}),e.d(l,"scale",function(){return po}),e.d(l,"scaleAndAdd",function(){return go}),e.d(l,"distance",function(){return Mo}),e.d(l,"squaredDistance",function(){return _o}),e.d(l,"length",function(){return bo}),e.d(l,"squaredLength",function(){return xo}),e.d(l,"negate",function(){return Ro}),e.d(l,"inverse",function(){return So}),e.d(l,"normalize",function(){return yo}),e.d(l,"dot",function(){return Eo}),e.d(l,"cross",function(){return Ao}),e.d(l,"lerp",function(){return To}),e.d(l,"random",function(){return wo}),e.d(l,"transformMat2",function(){return Lo}),e.d(l,"transformMat2d",function(){return Io}),e.d(l,"transformMat3",function(){return Uo}),e.d(l,"transformMat4",function(){return Co}),e.d(l,"rotate",function(){return Po}),e.d(l,"angle",function(){return Do}),e.d(l,"zero",function(){return Oo}),e.d(l,"str",function(){return Fo}),e.d(l,"exactEquals",function(){return ko}),e.d(l,"equals",function(){return Bo}),e.d(l,"len",function(){return qo}),e.d(l,"sub",function(){return No}),e.d(l,"mul",function(){return Vo}),e.d(l,"div",function(){return Xo}),e.d(l,"dist",function(){return jo}),e.d(l,"sqrDist",function(){return Ho}),e.d(l,"sqrLen",function(){return Go}),e.d(l,"forEach",function(){return zo});var m=1e-6,h="undefined"!=typeof Float32Array?Float32Array:Array,v=Math.random;function p(n){h=n}var g=Math.PI/180;function M(n){return n*g}function _(n,t){return Math.abs(n-t)<=m*Math.max(1,Math.abs(n),Math.abs(t))}function b(){var n=new h(4);return h!=Float32Array&&(n[1]=0,n[2]=0),n[0]=1,n[3]=1,n}function x(n){var t=new h(4);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}function R(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n}function S(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n}function y(n,t,e,r){var a=new h(4);return a[0]=n,a[1]=t,a[2]=e,a[3]=r,a}function E(n,t,e,r,a){return n[0]=t,n[1]=e,n[2]=r,n[3]=a,n}function A(n,t){if(n===t){var e=t[1];n[1]=t[2],n[2]=e}else n[0]=t[0],n[1]=t[2],n[2]=t[1],n[3]=t[3];return n}function T(n,t){var e=t[0],r=t[1],a=t[2],o=t[3],i=e*o-a*r;return i?(i=1/i,n[0]=o*i,n[1]=-r*i,n[2]=-a*i,n[3]=e*i,n):null}function w(n,t){var e=t[0];return n[0]=t[3],n[1]=-t[1],n[2]=-t[2],n[3]=e,n}function L(n){return n[0]*n[3]-n[2]*n[1]}function I(n,t,e){var r=t[0],a=t[1],o=t[2],i=t[3],u=e[0],s=e[1],c=e[2],f=e[3];return n[0]=r*u+o*s,n[1]=a*u+i*s,n[2]=r*c+o*f,n[3]=a*c+i*f,n}function U(n,t,e){var r=t[0],a=t[1],o=t[2],i=t[3],u=Math.sin(e),s=Math.cos(e);return n[0]=r*s+o*u,n[1]=a*s+i*u,n[2]=r*-u+o*s,n[3]=a*-u+i*s,n}function C(n,t,e){var r=t[0],a=t[1],o=t[2],i=t[3],u=e[0],s=e[1];return n[0]=r*u,n[1]=a*u,n[2]=o*s,n[3]=i*s,n}function P(n,t){var e=Math.sin(t),r=Math.cos(t);return n[0]=r,n[1]=e,n[2]=-e,n[3]=r,n}function D(n,t){return n[0]=t[0],n[1]=0,n[2]=0,n[3]=t[1],n}function O(n){return"mat2("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+")"}function F(n){return Math.hypot(n[0],n[1],n[2],n[3])}function k(n,t,e,r){return n[2]=r[2]/r[0],e[0]=r[0],e[1]=r[1],e[3]=r[3]-n[2]*e[1],[n,t,e]}function B(n,t,e){return n[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n[3]=t[3]+e[3],n}function q(n,t,e){return n[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n[3]=t[3]-e[3],n}function N(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]&&n[3]===t[3]}function V(n,t){var e=n[0],r=n[1],a=n[2],o=n[3],i=t[0],u=t[1],s=t[2],c=t[3];return Math.abs(e-i)<=m*Math.max(1,Math.abs(e),Math.abs(i))&&Math.abs(r-u)<=m*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(a-s)<=m*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(o-c)<=m*Math.max(1,Math.abs(o),Math.abs(c))}function X(n,t,e){return n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n[3]=t[3]*e,n}function j(n,t,e,r){return n[0]=t[0]+e[0]*r,n[1]=t[1]+e[1]*r,n[2]=t[2]+e[2]*r,n[3]=t[3]+e[3]*r,n}Math.hypot||(Math.hypot=function(){for(var n=0,t=arguments.length;t--;)n+=arguments[t]*arguments[t];return Math.sqrt(n)});var H=I,G=q;function z(){var n=new h(6);return h!=Float32Array&&(n[1]=0,n[2]=0,n[4]=0,n[5]=0),n[0]=1,n[3]=1,n}function Q(n){var t=new h(6);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t}function Y(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n}function W(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n[4]=0,n[5]=0,n}function Z(n,t,e,r,a,o){var i=new h(6);return i[0]=n,i[1]=t,i[2]=e,i[3]=r,i[4]=a,i[5]=o,i}function $(n,t,e,r,a,o,i){return n[0]=t,n[1]=e,n[2]=r,n[3]=a,n[4]=o,n[5]=i,n}function K(n,t){var e=t[0],r=t[1],a=t[2],o=t[3],i=t[4],u=t[5],s=e*o-r*a;return s?(s=1/s,n[0]=o*s,n[1]=-r*s,n[2]=-a*s,n[3]=e*s,n[4]=(a*u-o*i)*s,n[5]=(r*i-e*u)*s,n):null}function J(n){return n[0]*n[3]-n[1]*n[2]}function nn(n,t,e){var r=t[0],a=t[1],o=t[2],i=t[3],u=t[4],s=t[5],c=e[0],f=e[1],d=e[2],l=e[3],m=e[4],h=e[5];return n[0]=r*c+o*f,n[1]=a*c+i*f,n[2]=r*d+o*l,n[3]=a*d+i*l,n[4]=r*m+o*h+u,n[5]=a*m+i*h+s,n}function tn(n,t,e){var r=t[0],a=t[1],o=t[2],i=t[3],u=t[4],s=t[5],c=Math.sin(e),f=Math.cos(e);return n[0]=r*f+o*c,n[1]=a*f+i*c,n[2]=r*-c+o*f,n[3]=a*-c+i*f,n[4]=u,n[5]=s,n}function en(n,t,e){var r=t[0],a=t[1],o=t[2],i=t[3],u=t[4],s=t[5],c=e[0],f=e[1];return n[0]=r*c,n[1]=a*c,n[2]=o*f,n[3]=i*f,n[4]=u,n[5]=s,n}function rn(n,t,e){var r=t[0],a=t[1],o=t[2],i=t[3],u=t[4],s=t[5],c=e[0],f=e[1];return n[0]=r,n[1]=a,n[2]=o,n[3]=i,n[4]=r*c+o*f+u,n[5]=a*c+i*f+s,n}function an(n,t){var e=Math.sin(t),r=Math.cos(t);return n[0]=r,n[1]=e,n[2]=-e,n[3]=r,n[4]=0,n[5]=0,n}function on(n,t){return n[0]=t[0],n[1]=0,n[2]=0,n[3]=t[1],n[4]=0,n[5]=0,n}function un(n,t){return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n[4]=t[0],n[5]=t[1],n}function sn(n){return"mat2d("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+")"}function cn(n){return Math.hypot(n[0],n[1],n[2],n[3],n[4],n[5],1)}function fn(n,t,e){return n[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n[3]=t[3]+e[3],n[4]=t[4]+e[4],n[5]=t[5]+e[5],n}function dn(n,t,e){return n[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n[3]=t[3]-e[3],n[4]=t[4]-e[4],n[5]=t[5]-e[5],n}function ln(n,t,e){return n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n[3]=t[3]*e,n[4]=t[4]*e,n[5]=t[5]*e,n}function mn(n,t,e,r){return n[0]=t[0]+e[0]*r,n[1]=t[1]+e[1]*r,n[2]=t[2]+e[2]*r,n[3]=t[3]+e[3]*r,n[4]=t[4]+e[4]*r,n[5]=t[5]+e[5]*r,n}function hn(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]&&n[3]===t[3]&&n[4]===t[4]&&n[5]===t[5]}function vn(n,t){var e=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],s=t[0],c=t[1],f=t[2],d=t[3],l=t[4],h=t[5];return Math.abs(e-s)<=m*Math.max(1,Math.abs(e),Math.abs(s))&&Math.abs(r-c)<=m*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(a-f)<=m*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(o-d)<=m*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(i-l)<=m*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(u-h)<=m*Math.max(1,Math.abs(u),Math.abs(h))}var pn=nn,gn=dn;function Mn(){var n=new h(9);return h!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1,n}function _n(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[4],n[4]=t[5],n[5]=t[6],n[6]=t[8],n[7]=t[9],n[8]=t[10],n}function bn(n){var t=new h(9);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t}function xn(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n}function Rn(n,t,e,r,a,o,i,u,s){var c=new h(9);return c[0]=n,c[1]=t,c[2]=e,c[3]=r,c[4]=a,c[5]=o,c[6]=i,c[7]=u,c[8]=s,c}function Sn(n,t,e,r,a,o,i,u,s,c){return n[0]=t,n[1]=e,n[2]=r,n[3]=a,n[4]=o,n[5]=i,n[6]=u,n[7]=s,n[8]=c,n}function yn(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=1,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n}function En(n,t){if(n===t){var e=t[1],r=t[2],a=t[5];n[1]=t[3],n[2]=t[6],n[3]=e,n[5]=t[7],n[6]=r,n[7]=a}else n[0]=t[0],n[1]=t[3],n[2]=t[6],n[3]=t[1],n[4]=t[4],n[5]=t[7],n[6]=t[2],n[7]=t[5],n[8]=t[8];return n}function An(n,t){var e=t[0],r=t[1],a=t[2],o=t[3],i=t[4],u=t[5],s=t[6],c=t[7],f=t[8],d=f*i-u*c,l=-f*o+u*s,m=c*o-i*s,h=e*d+r*l+a*m;return h?(h=1/h,n[0]=d*h,n[1]=(-f*r+a*c)*h,n[2]=(u*r-a*i)*h,n[3]=l*h,n[4]=(f*e-a*s)*h,n[5]=(-u*e+a*o)*h,n[6]=m*h,n[7]=(-c*e+r*s)*h,n[8]=(i*e-r*o)*h,n):null}function Tn(n,t){var e=t[0],r=t[1],a=t[2],o=t[3],i=t[4],u=t[5],s=t[6],c=t[7],f=t[8];return n[0]=i*f-u*c,n[1]=a*c-r*f,n[2]=r*u-a*i,n[3]=u*s-o*f,n[4]=e*f-a*s,n[5]=a*o-e*u,n[6]=o*c-i*s,n[7]=r*s-e*c,n[8]=e*i-r*o,n}function wn(n){var t=n[0],e=n[1],r=n[2],a=n[3],o=n[4],i=n[5],u=n[6],s=n[7],c=n[8];return t*(c*o-i*s)+e*(-c*a+i*u)+r*(s*a-o*u)}function Ln(n,t,e){var r=t[0],a=t[1],o=t[2],i=t[3],u=t[4],s=t[5],c=t[6],f=t[7],d=t[8],l=e[0],m=e[1],h=e[2],v=e[3],p=e[4],g=e[5],M=e[6],_=e[7],b=e[8];return n[0]=l*r+m*i+h*c,n[1]=l*a+m*u+h*f,n[2]=l*o+m*s+h*d,n[3]=v*r+p*i+g*c,n[4]=v*a+p*u+g*f,n[5]=v*o+p*s+g*d,n[6]=M*r+_*i+b*c,n[7]=M*a+_*u+b*f,n[8]=M*o+_*s+b*d,n}function In(n,t,e){var r=t[0],a=t[1],o=t[2],i=t[3],u=t[4],s=t[5],c=t[6],f=t[7],d=t[8],l=e[0],m=e[1];return n[0]=r,n[1]=a,n[2]=o,n[3]=i,n[4]=u,n[5]=s,n[6]=l*r+m*i+c,n[7]=l*a+m*u+f,n[8]=l*o+m*s+d,n}function Un(n,t,e){var r=t[0],a=t[1],o=t[2],i=t[3],u=t[4],s=t[5],c=t[6],f=t[7],d=t[8],l=Math.sin(e),m=Math.cos(e);return n[0]=m*r+l*i,n[1]=m*a+l*u,n[2]=m*o+l*s,n[3]=m*i-l*r,n[4]=m*u-l*a,n[5]=m*s-l*o,n[6]=c,n[7]=f,n[8]=d,n}function Cn(n,t,e){var r=e[0],a=e[1];return n[0]=r*t[0],n[1]=r*t[1],n[2]=r*t[2],n[3]=a*t[3],n[4]=a*t[4],n[5]=a*t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n}function Pn(n,t){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=1,n[5]=0,n[6]=t[0],n[7]=t[1],n[8]=1,n}function Dn(n,t){var e=Math.sin(t),r=Math.cos(t);return n[0]=r,n[1]=e,n[2]=0,n[3]=-e,n[4]=r,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n}function On(n,t){return n[0]=t[0],n[1]=0,n[2]=0,n[3]=0,n[4]=t[1],n[5]=0,n[6]=0,n[7]=0,n[8]=1,n}function Fn(n,t){return n[0]=t[0],n[1]=t[1],n[2]=0,n[3]=t[2],n[4]=t[3],n[5]=0,n[6]=t[4],n[7]=t[5],n[8]=1,n}function kn(n,t){var e=t[0],r=t[1],a=t[2],o=t[3],i=e+e,u=r+r,s=a+a,c=e*i,f=r*i,d=r*u,l=a*i,m=a*u,h=a*s,v=o*i,p=o*u,g=o*s;return n[0]=1-d-h,n[3]=f-g,n[6]=l+p,n[1]=f+g,n[4]=1-c-h,n[7]=m-v,n[2]=l-p,n[5]=m+v,n[8]=1-c-d,n}function Bn(n,t){var e=t[0],r=t[1],a=t[2],o=t[3],i=t[4],u=t[5],s=t[6],c=t[7],f=t[8],d=t[9],l=t[10],m=t[11],h=t[12],v=t[13],p=t[14],g=t[15],M=e*u-r*i,_=e*s-a*i,b=e*c-o*i,x=r*s-a*u,R=r*c-o*u,S=a*c-o*s,y=f*v-d*h,E=f*p-l*h,A=f*g-m*h,T=d*p-l*v,w=d*g-m*v,L=l*g-m*p,I=M*L-_*w+b*T+x*A-R*E+S*y;return I?(I=1/I,n[0]=(u*L-s*w+c*T)*I,n[1]=(s*A-i*L-c*E)*I,n[2]=(i*w-u*A+c*y)*I,n[3]=(a*w-r*L-o*T)*I,n[4]=(e*L-a*A+o*E)*I,n[5]=(r*A-e*w-o*y)*I,n[6]=(v*S-p*R+g*x)*I,n[7]=(p*b-h*S-g*_)*I,n[8]=(h*R-v*b+g*M)*I,n):null}function qn(n,t,e){return n[0]=2/t,n[1]=0,n[2]=0,n[3]=0,n[4]=-2/e,n[5]=0,n[6]=-1,n[7]=1,n[8]=1,n}function Nn(n){return"mat3("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+", "+n[6]+", "+n[7]+", "+n[8]+")"}function Vn(n){return Math.hypot(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8])}function Xn(n,t,e){return n[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n[3]=t[3]+e[3],n[4]=t[4]+e[4],n[5]=t[5]+e[5],n[6]=t[6]+e[6],n[7]=t[7]+e[7],n[8]=t[8]+e[8],n}function jn(n,t,e){return n[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n[3]=t[3]-e[3],n[4]=t[4]-e[4],n[5]=t[5]-e[5],n[6]=t[6]-e[6],n[7]=t[7]-e[7],n[8]=t[8]-e[8],n}function Hn(n,t,e){return n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n[3]=t[3]*e,n[4]=t[4]*e,n[5]=t[5]*e,n[6]=t[6]*e,n[7]=t[7]*e,n[8]=t[8]*e,n}function Gn(n,t,e,r){return n[0]=t[0]+e[0]*r,n[1]=t[1]+e[1]*r,n[2]=t[2]+e[2]*r,n[3]=t[3]+e[3]*r,n[4]=t[4]+e[4]*r,n[5]=t[5]+e[5]*r,n[6]=t[6]+e[6]*r,n[7]=t[7]+e[7]*r,n[8]=t[8]+e[8]*r,n}function zn(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]&&n[3]===t[3]&&n[4]===t[4]&&n[5]===t[5]&&n[6]===t[6]&&n[7]===t[7]&&n[8]===t[8]}function Qn(n,t){var e=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],s=n[6],c=n[7],f=n[8],d=t[0],l=t[1],h=t[2],v=t[3],p=t[4],g=t[5],M=t[6],_=t[7],b=t[8];return Math.abs(e-d)<=m*Math.max(1,Math.abs(e),Math.abs(d))&&Math.abs(r-l)<=m*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(a-h)<=m*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(o-v)<=m*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(i-p)<=m*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(u-g)<=m*Math.max(1,Math.abs(u),Math.abs(g))&&Math.abs(s-M)<=m*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(c-_)<=m*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(f-b)<=m*Math.max(1,Math.abs(f),Math.abs(b))}var Yn=Ln,Wn=jn;function Zn(){var n=new h(16);return h!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0),n[0]=1,n[5]=1,n[10]=1,n[15]=1,n}function $n(n){var t=new h(16);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function Kn(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}function Jn(n,t,e,r,a,o,i,u,s,c,f,d,l,m,v,p){var g=new h(16);return g[0]=n,g[1]=t,g[2]=e,g[3]=r,g[4]=a,g[5]=o,g[6]=i,g[7]=u,g[8]=s,g[9]=c,g[10]=f,g[11]=d,g[12]=l,g[13]=m,g[14]=v,g[15]=p,g}function nt(n,t,e,r,a,o,i,u,s,c,f,d,l,m,h,v,p){return n[0]=t,n[1]=e,n[2]=r,n[3]=a,n[4]=o,n[5]=i,n[6]=u,n[7]=s,n[8]=c,n[9]=f,n[10]=d,n[11]=l,n[12]=m,n[13]=h,n[14]=v,n[15]=p,n}function tt(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function et(n,t){if(n===t){var e=t[1],r=t[2],a=t[3],o=t[6],i=t[7],u=t[11];n[1]=t[4],n[2]=t[8],n[3]=t[12],n[4]=e,n[6]=t[9],n[7]=t[13],n[8]=r,n[9]=o,n[11]=t[14],n[12]=a,n[13]=i,n[14]=u}else n[0]=t[0],n[1]=t[4],n[2]=t[8],n[3]=t[12],n[4]=t[1],n[5]=t[5],n[6]=t[9],n[7]=t[13],n[8]=t[2],n[9]=t[6],n[10]=t[10],n[11]=t[14],n[12]=t[3],n[13]=t[7],n[14]=t[11],n[15]=t[15];return n}function rt(n,t){var e=t[0],r=t[1],a=t[2],o=t[3],i=t[4],u=t[5],s=t[6],c=t[7],f=t[8],d=t[9],l=t[10],m=t[11],h=t[12],v=t[13],p=t[14],g=t[15],M=e*u-r*i,_=e*s-a*i,b=e*c-o*i,x=r*s-a*u,R=r*c-o*u,S=a*c-o*s,y=f*v-d*h,E=f*p-l*h,A=f*g-m*h,T=d*p-l*v,w=d*g-m*v,L=l*g-m*p,I=M*L-_*w+b*T+x*A-R*E+S*y;return I?(I=1/I,n[0]=(u*L-s*w+c*T)*I,n[1]=(a*w-r*L-o*T)*I,n[2]=(v*S-p*R+g*x)*I,n[3]=(l*R-d*S-m*x)*I,n[4]=(s*A-i*L-c*E)*I,n[5]=(e*L-a*A+o*E)*I,n[6]=(p*b-h*S-g*_)*I,n[7]=(f*S-l*b+m*_)*I,n[8]=(i*w-u*A+c*y)*I,n[9]=(r*A-e*w-o*y)*I,n[10]=(h*R-v*b+g*M)*I,n[11]=(d*b-f*R-m*M)*I,n[12]=(u*E-i*T-s*y)*I,n[13]=(e*T-r*E+a*y)*I,n[14]=(v*_-h*x-p*M)*I,n[15]=(f*x-d*_+l*M)*I,n):null}function at(n,t){var e=t[0],r=t[1],a=t[2],o=t[3],i=t[4],u=t[5],s=t[6],c=t[7],f=t[8],d=t[9],l=t[10],m=t[11],h=t[12],v=t[13],p=t[14],g=t[15];return n[0]=u*(l*g-m*p)-d*(s*g-c*p)+v*(s*m-c*l),n[1]=-(r*(l*g-m*p)-d*(a*g-o*p)+v*(a*m-o*l)),n[2]=r*(s*g-c*p)-u*(a*g-o*p)+v*(a*c-o*s),n[3]=-(r*(s*m-c*l)-u*(a*m-o*l)+d*(a*c-o*s)),n[4]=-(i*(l*g-m*p)-f*(s*g-c*p)+h*(s*m-c*l)),n[5]=e*(l*g-m*p)-f*(a*g-o*p)+h*(a*m-o*l),n[6]=-(e*(s*g-c*p)-i*(a*g-o*p)+h*(a*c-o*s)),n[7]=e*(s*m-c*l)-i*(a*m-o*l)+f*(a*c-o*s),n[8]=i*(d*g-m*v)-f*(u*g-c*v)+h*(u*m-c*d),n[9]=-(e*(d*g-m*v)-f*(r*g-o*v)+h*(r*m-o*d)),n[10]=e*(u*g-c*v)-i*(r*g-o*v)+h*(r*c-o*u),n[11]=-(e*(u*m-c*d)-i*(r*m-o*d)+f*(r*c-o*u)),n[12]=-(i*(d*p-l*v)-f*(u*p-s*v)+h*(u*l-s*d)),n[13]=e*(d*p-l*v)-f*(r*p-a*v)+h*(r*l-a*d),n[14]=-(e*(u*p-s*v)-i*(r*p-a*v)+h*(r*s-a*u)),n[15]=e*(u*l-s*d)-i*(r*l-a*d)+f*(r*s-a*u),n}function ot(n){var t=n[0],e=n[1],r=n[2],a=n[3],o=n[4],i=n[5],u=n[6],s=n[7],c=n[8],f=n[9],d=n[10],l=n[11],m=n[12],h=n[13],v=n[14],p=n[15];return(t*i-e*o)*(d*p-l*v)-(t*u-r*o)*(f*p-l*h)+(t*s-a*o)*(f*v-d*h)+(e*u-r*i)*(c*p-l*m)-(e*s-a*i)*(c*v-d*m)+(r*s-a*u)*(c*h-f*m)}function it(n,t,e){var r=t[0],a=t[1],o=t[2],i=t[3],u=t[4],s=t[5],c=t[6],f=t[7],d=t[8],l=t[9],m=t[10],h=t[11],v=t[12],p=t[13],g=t[14],M=t[15],_=e[0],b=e[1],x=e[2],R=e[3];return n[0]=_*r+b*u+x*d+R*v,n[1]=_*a+b*s+x*l+R*p,n[2]=_*o+b*c+x*m+R*g,n[3]=_*i+b*f+x*h+R*M,_=e[4],b=e[5],x=e[6],R=e[7],n[4]=_*r+b*u+x*d+R*v,n[5]=_*a+b*s+x*l+R*p,n[6]=_*o+b*c+x*m+R*g,n[7]=_*i+b*f+x*h+R*M,_=e[8],b=e[9],x=e[10],R=e[11],n[8]=_*r+b*u+x*d+R*v,n[9]=_*a+b*s+x*l+R*p,n[10]=_*o+b*c+x*m+R*g,n[11]=_*i+b*f+x*h+R*M,_=e[12],b=e[13],x=e[14],R=e[15],n[12]=_*r+b*u+x*d+R*v,n[13]=_*a+b*s+x*l+R*p,n[14]=_*o+b*c+x*m+R*g,n[15]=_*i+b*f+x*h+R*M,n}function ut(n,t,e){var r,a,o,i,u,s,c,f,d,l,m,h,v=e[0],p=e[1],g=e[2];return t===n?(n[12]=t[0]*v+t[4]*p+t[8]*g+t[12],n[13]=t[1]*v+t[5]*p+t[9]*g+t[13],n[14]=t[2]*v+t[6]*p+t[10]*g+t[14],n[15]=t[3]*v+t[7]*p+t[11]*g+t[15]):(r=t[0],a=t[1],o=t[2],i=t[3],u=t[4],s=t[5],c=t[6],f=t[7],d=t[8],l=t[9],m=t[10],h=t[11],n[0]=r,n[1]=a,n[2]=o,n[3]=i,n[4]=u,n[5]=s,n[6]=c,n[7]=f,n[8]=d,n[9]=l,n[10]=m,n[11]=h,n[12]=r*v+u*p+d*g+t[12],n[13]=a*v+s*p+l*g+t[13],n[14]=o*v+c*p+m*g+t[14],n[15]=i*v+f*p+h*g+t[15]),n}function st(n,t,e){var r=e[0],a=e[1],o=e[2];return n[0]=t[0]*r,n[1]=t[1]*r,n[2]=t[2]*r,n[3]=t[3]*r,n[4]=t[4]*a,n[5]=t[5]*a,n[6]=t[6]*a,n[7]=t[7]*a,n[8]=t[8]*o,n[9]=t[9]*o,n[10]=t[10]*o,n[11]=t[11]*o,n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}function ct(n,t,e,r){var a,o,i,u,s,c,f,d,l,h,v,p,g,M,_,b,x,R,S,y,E,A,T,w,L=r[0],I=r[1],U=r[2],C=Math.hypot(L,I,U);return C<m?null:(L*=C=1/C,I*=C,U*=C,a=Math.sin(e),i=1-(o=Math.cos(e)),u=t[0],s=t[1],c=t[2],f=t[3],d=t[4],l=t[5],h=t[6],v=t[7],p=t[8],g=t[9],M=t[10],_=t[11],b=L*L*i+o,x=I*L*i+U*a,R=U*L*i-I*a,S=L*I*i-U*a,y=I*I*i+o,E=U*I*i+L*a,A=L*U*i+I*a,T=I*U*i-L*a,w=U*U*i+o,n[0]=u*b+d*x+p*R,n[1]=s*b+l*x+g*R,n[2]=c*b+h*x+M*R,n[3]=f*b+v*x+_*R,n[4]=u*S+d*y+p*E,n[5]=s*S+l*y+g*E,n[6]=c*S+h*y+M*E,n[7]=f*S+v*y+_*E,n[8]=u*A+d*T+p*w,n[9]=s*A+l*T+g*w,n[10]=c*A+h*T+M*w,n[11]=f*A+v*T+_*w,t!==n&&(n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n)}function ft(n,t,e){var r=Math.sin(e),a=Math.cos(e),o=t[4],i=t[5],u=t[6],s=t[7],c=t[8],f=t[9],d=t[10],l=t[11];return t!==n&&(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[4]=o*a+c*r,n[5]=i*a+f*r,n[6]=u*a+d*r,n[7]=s*a+l*r,n[8]=c*a-o*r,n[9]=f*a-i*r,n[10]=d*a-u*r,n[11]=l*a-s*r,n}function dt(n,t,e){var r=Math.sin(e),a=Math.cos(e),o=t[0],i=t[1],u=t[2],s=t[3],c=t[8],f=t[9],d=t[10],l=t[11];return t!==n&&(n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[0]=o*a-c*r,n[1]=i*a-f*r,n[2]=u*a-d*r,n[3]=s*a-l*r,n[8]=o*r+c*a,n[9]=i*r+f*a,n[10]=u*r+d*a,n[11]=s*r+l*a,n}function lt(n,t,e){var r=Math.sin(e),a=Math.cos(e),o=t[0],i=t[1],u=t[2],s=t[3],c=t[4],f=t[5],d=t[6],l=t[7];return t!==n&&(n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[0]=o*a+c*r,n[1]=i*a+f*r,n[2]=u*a+d*r,n[3]=s*a+l*r,n[4]=c*a-o*r,n[5]=f*a-i*r,n[6]=d*a-u*r,n[7]=l*a-s*r,n}function mt(n,t){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=t[0],n[13]=t[1],n[14]=t[2],n[15]=1,n}function ht(n,t){return n[0]=t[0],n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=t[1],n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=t[2],n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function vt(n,t,e){var r,a,o,i=e[0],u=e[1],s=e[2],c=Math.hypot(i,u,s);return c<m?null:(i*=c=1/c,u*=c,s*=c,r=Math.sin(t),o=1-(a=Math.cos(t)),n[0]=i*i*o+a,n[1]=u*i*o+s*r,n[2]=s*i*o-u*r,n[3]=0,n[4]=i*u*o-s*r,n[5]=u*u*o+a,n[6]=s*u*o+i*r,n[7]=0,n[8]=i*s*o+u*r,n[9]=u*s*o-i*r,n[10]=s*s*o+a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n)}function pt(n,t){var e=Math.sin(t),r=Math.cos(t);return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=r,n[6]=e,n[7]=0,n[8]=0,n[9]=-e,n[10]=r,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function gt(n,t){var e=Math.sin(t),r=Math.cos(t);return n[0]=r,n[1]=0,n[2]=-e,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=e,n[9]=0,n[10]=r,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function Mt(n,t){var e=Math.sin(t),r=Math.cos(t);return n[0]=r,n[1]=e,n[2]=0,n[3]=0,n[4]=-e,n[5]=r,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function _t(n,t,e){var r=t[0],a=t[1],o=t[2],i=t[3],u=r+r,s=a+a,c=o+o,f=r*u,d=r*s,l=r*c,m=a*s,h=a*c,v=o*c,p=i*u,g=i*s,M=i*c;return n[0]=1-(m+v),n[1]=d+M,n[2]=l-g,n[3]=0,n[4]=d-M,n[5]=1-(f+v),n[6]=h+p,n[7]=0,n[8]=l+g,n[9]=h-p,n[10]=1-(f+m),n[11]=0,n[12]=e[0],n[13]=e[1],n[14]=e[2],n[15]=1,n}function bt(n,t){var e=new h(3),r=-t[0],a=-t[1],o=-t[2],i=t[3],u=t[4],s=t[5],c=t[6],f=t[7],d=r*r+a*a+o*o+i*i;return d>0?(e[0]=2*(u*i+f*r+s*o-c*a)/d,e[1]=2*(s*i+f*a+c*r-u*o)/d,e[2]=2*(c*i+f*o+u*a-s*r)/d):(e[0]=2*(u*i+f*r+s*o-c*a),e[1]=2*(s*i+f*a+c*r-u*o),e[2]=2*(c*i+f*o+u*a-s*r)),_t(n,t,e),n}function xt(n,t){return n[0]=t[12],n[1]=t[13],n[2]=t[14],n}function Rt(n,t){var e=t[0],r=t[1],a=t[2],o=t[4],i=t[5],u=t[6],s=t[8],c=t[9],f=t[10];return n[0]=Math.hypot(e,r,a),n[1]=Math.hypot(o,i,u),n[2]=Math.hypot(s,c,f),n}function St(n,t){var e=new h(3);Rt(e,t);var r=1/e[0],a=1/e[1],o=1/e[2],i=t[0]*r,u=t[1]*a,s=t[2]*o,c=t[4]*r,f=t[5]*a,d=t[6]*o,l=t[8]*r,m=t[9]*a,v=t[10]*o,p=i+f+v,g=0;return p>0?(g=2*Math.sqrt(p+1),n[3]=.25*g,n[0]=(d-m)/g,n[1]=(l-s)/g,n[2]=(u-c)/g):i>f&&i>v?(g=2*Math.sqrt(1+i-f-v),n[3]=(d-m)/g,n[0]=.25*g,n[1]=(u+c)/g,n[2]=(l+s)/g):f>v?(g=2*Math.sqrt(1+f-i-v),n[3]=(l-s)/g,n[0]=(u+c)/g,n[1]=.25*g,n[2]=(d+m)/g):(g=2*Math.sqrt(1+v-i-f),n[3]=(u-c)/g,n[0]=(l+s)/g,n[1]=(d+m)/g,n[2]=.25*g),n}function yt(n,t,e,r){var a=t[0],o=t[1],i=t[2],u=t[3],s=a+a,c=o+o,f=i+i,d=a*s,l=a*c,m=a*f,h=o*c,v=o*f,p=i*f,g=u*s,M=u*c,_=u*f,b=r[0],x=r[1],R=r[2];return n[0]=(1-(h+p))*b,n[1]=(l+_)*b,n[2]=(m-M)*b,n[3]=0,n[4]=(l-_)*x,n[5]=(1-(d+p))*x,n[6]=(v+g)*x,n[7]=0,n[8]=(m+M)*R,n[9]=(v-g)*R,n[10]=(1-(d+h))*R,n[11]=0,n[12]=e[0],n[13]=e[1],n[14]=e[2],n[15]=1,n}function Et(n,t,e,r,a){var o=t[0],i=t[1],u=t[2],s=t[3],c=o+o,f=i+i,d=u+u,l=o*c,m=o*f,h=o*d,v=i*f,p=i*d,g=u*d,M=s*c,_=s*f,b=s*d,x=r[0],R=r[1],S=r[2],y=a[0],E=a[1],A=a[2],T=(1-(v+g))*x,w=(m+b)*x,L=(h-_)*x,I=(m-b)*R,U=(1-(l+g))*R,C=(p+M)*R,P=(h+_)*S,D=(p-M)*S,O=(1-(l+v))*S;return n[0]=T,n[1]=w,n[2]=L,n[3]=0,n[4]=I,n[5]=U,n[6]=C,n[7]=0,n[8]=P,n[9]=D,n[10]=O,n[11]=0,n[12]=e[0]+y-(T*y+I*E+P*A),n[13]=e[1]+E-(w*y+U*E+D*A),n[14]=e[2]+A-(L*y+C*E+O*A),n[15]=1,n}function At(n,t){var e=t[0],r=t[1],a=t[2],o=t[3],i=e+e,u=r+r,s=a+a,c=e*i,f=r*i,d=r*u,l=a*i,m=a*u,h=a*s,v=o*i,p=o*u,g=o*s;return n[0]=1-d-h,n[1]=f+g,n[2]=l-p,n[3]=0,n[4]=f-g,n[5]=1-c-h,n[6]=m+v,n[7]=0,n[8]=l+p,n[9]=m-v,n[10]=1-c-d,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function Tt(n,t,e,r,a,o,i){var u=1/(e-t),s=1/(a-r),c=1/(o-i);return n[0]=2*o*u,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=2*o*s,n[6]=0,n[7]=0,n[8]=(e+t)*u,n[9]=(a+r)*s,n[10]=(i+o)*c,n[11]=-1,n[12]=0,n[13]=0,n[14]=i*o*2*c,n[15]=0,n}function wt(n,t,e,r,a){var o,i=1/Math.tan(t/2);return n[0]=i/e,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=i,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,null!=a&&a!==1/0?(o=1/(r-a),n[10]=(a+r)*o,n[14]=2*a*r*o):(n[10]=-1,n[14]=-2*r),n}function Lt(n,t,e,r){var a=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),i=Math.tan(t.leftDegrees*Math.PI/180),u=Math.tan(t.rightDegrees*Math.PI/180),s=2/(i+u),c=2/(a+o);return n[0]=s,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=c,n[6]=0,n[7]=0,n[8]=-(i-u)*s*.5,n[9]=(a-o)*c*.5,n[10]=r/(e-r),n[11]=-1,n[12]=0,n[13]=0,n[14]=r*e/(e-r),n[15]=0,n}function It(n,t,e,r,a,o,i){var u=1/(t-e),s=1/(r-a),c=1/(o-i);return n[0]=-2*u,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*s,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*c,n[11]=0,n[12]=(t+e)*u,n[13]=(a+r)*s,n[14]=(i+o)*c,n[15]=1,n}function Ut(n,t,e,r){var a,o,i,u,s,c,f,d,l,h,v=t[0],p=t[1],g=t[2],M=r[0],_=r[1],b=r[2],x=e[0],R=e[1],S=e[2];return Math.abs(v-x)<m&&Math.abs(p-R)<m&&Math.abs(g-S)<m?tt(n):(f=v-x,d=p-R,l=g-S,a=_*(l*=h=1/Math.hypot(f,d,l))-b*(d*=h),o=b*(f*=h)-M*l,i=M*d-_*f,(h=Math.hypot(a,o,i))?(a*=h=1/h,o*=h,i*=h):(a=0,o=0,i=0),u=d*i-l*o,s=l*a-f*i,c=f*o-d*a,(h=Math.hypot(u,s,c))?(u*=h=1/h,s*=h,c*=h):(u=0,s=0,c=0),n[0]=a,n[1]=u,n[2]=f,n[3]=0,n[4]=o,n[5]=s,n[6]=d,n[7]=0,n[8]=i,n[9]=c,n[10]=l,n[11]=0,n[12]=-(a*v+o*p+i*g),n[13]=-(u*v+s*p+c*g),n[14]=-(f*v+d*p+l*g),n[15]=1,n)}function Ct(n,t,e,r){var a=t[0],o=t[1],i=t[2],u=r[0],s=r[1],c=r[2],f=a-e[0],d=o-e[1],l=i-e[2],m=f*f+d*d+l*l;m>0&&(f*=m=1/Math.sqrt(m),d*=m,l*=m);var h=s*l-c*d,v=c*f-u*l,p=u*d-s*f;return(m=h*h+v*v+p*p)>0&&(h*=m=1/Math.sqrt(m),v*=m,p*=m),n[0]=h,n[1]=v,n[2]=p,n[3]=0,n[4]=d*p-l*v,n[5]=l*h-f*p,n[6]=f*v-d*h,n[7]=0,n[8]=f,n[9]=d,n[10]=l,n[11]=0,n[12]=a,n[13]=o,n[14]=i,n[15]=1,n}function Pt(n){return"mat4("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+", "+n[6]+", "+n[7]+", "+n[8]+", "+n[9]+", "+n[10]+", "+n[11]+", "+n[12]+", "+n[13]+", "+n[14]+", "+n[15]+")"}function Dt(n){return Math.hypot(n[0],n[1],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15])}function Ot(n,t,e){return n[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n[3]=t[3]+e[3],n[4]=t[4]+e[4],n[5]=t[5]+e[5],n[6]=t[6]+e[6],n[7]=t[7]+e[7],n[8]=t[8]+e[8],n[9]=t[9]+e[9],n[10]=t[10]+e[10],n[11]=t[11]+e[11],n[12]=t[12]+e[12],n[13]=t[13]+e[13],n[14]=t[14]+e[14],n[15]=t[15]+e[15],n}function Ft(n,t,e){return n[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n[3]=t[3]-e[3],n[4]=t[4]-e[4],n[5]=t[5]-e[5],n[6]=t[6]-e[6],n[7]=t[7]-e[7],n[8]=t[8]-e[8],n[9]=t[9]-e[9],n[10]=t[10]-e[10],n[11]=t[11]-e[11],n[12]=t[12]-e[12],n[13]=t[13]-e[13],n[14]=t[14]-e[14],n[15]=t[15]-e[15],n}function kt(n,t,e){return n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n[3]=t[3]*e,n[4]=t[4]*e,n[5]=t[5]*e,n[6]=t[6]*e,n[7]=t[7]*e,n[8]=t[8]*e,n[9]=t[9]*e,n[10]=t[10]*e,n[11]=t[11]*e,n[12]=t[12]*e,n[13]=t[13]*e,n[14]=t[14]*e,n[15]=t[15]*e,n}function Bt(n,t,e,r){return n[0]=t[0]+e[0]*r,n[1]=t[1]+e[1]*r,n[2]=t[2]+e[2]*r,n[3]=t[3]+e[3]*r,n[4]=t[4]+e[4]*r,n[5]=t[5]+e[5]*r,n[6]=t[6]+e[6]*r,n[7]=t[7]+e[7]*r,n[8]=t[8]+e[8]*r,n[9]=t[9]+e[9]*r,n[10]=t[10]+e[10]*r,n[11]=t[11]+e[11]*r,n[12]=t[12]+e[12]*r,n[13]=t[13]+e[13]*r,n[14]=t[14]+e[14]*r,n[15]=t[15]+e[15]*r,n}function qt(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]&&n[3]===t[3]&&n[4]===t[4]&&n[5]===t[5]&&n[6]===t[6]&&n[7]===t[7]&&n[8]===t[8]&&n[9]===t[9]&&n[10]===t[10]&&n[11]===t[11]&&n[12]===t[12]&&n[13]===t[13]&&n[14]===t[14]&&n[15]===t[15]}function Nt(n,t){var e=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],s=n[6],c=n[7],f=n[8],d=n[9],l=n[10],h=n[11],v=n[12],p=n[13],g=n[14],M=n[15],_=t[0],b=t[1],x=t[2],R=t[3],S=t[4],y=t[5],E=t[6],A=t[7],T=t[8],w=t[9],L=t[10],I=t[11],U=t[12],C=t[13],P=t[14],D=t[15];return Math.abs(e-_)<=m*Math.max(1,Math.abs(e),Math.abs(_))&&Math.abs(r-b)<=m*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(a-x)<=m*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(o-R)<=m*Math.max(1,Math.abs(o),Math.abs(R))&&Math.abs(i-S)<=m*Math.max(1,Math.abs(i),Math.abs(S))&&Math.abs(u-y)<=m*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(s-E)<=m*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(c-A)<=m*Math.max(1,Math.abs(c),Math.abs(A))&&Math.abs(f-T)<=m*Math.max(1,Math.abs(f),Math.abs(T))&&Math.abs(d-w)<=m*Math.max(1,Math.abs(d),Math.abs(w))&&Math.abs(l-L)<=m*Math.max(1,Math.abs(l),Math.abs(L))&&Math.abs(h-I)<=m*Math.max(1,Math.abs(h),Math.abs(I))&&Math.abs(v-U)<=m*Math.max(1,Math.abs(v),Math.abs(U))&&Math.abs(p-C)<=m*Math.max(1,Math.abs(p),Math.abs(C))&&Math.abs(g-P)<=m*Math.max(1,Math.abs(g),Math.abs(P))&&Math.abs(M-D)<=m*Math.max(1,Math.abs(M),Math.abs(D))}var Vt=it,Xt=Ft;function jt(){var n=new h(3);return h!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function Ht(n){var t=new h(3);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function Gt(n){var t=n[0],e=n[1],r=n[2];return Math.hypot(t,e,r)}function zt(n,t,e){var r=new h(3);return r[0]=n,r[1]=t,r[2]=e,r}function Qt(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n}function Yt(n,t,e,r){return n[0]=t,n[1]=e,n[2]=r,n}function Wt(n,t,e){return n[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n}function Zt(n,t,e){return n[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n}function $t(n,t,e){return n[0]=t[0]*e[0],n[1]=t[1]*e[1],n[2]=t[2]*e[2],n}function Kt(n,t,e){return n[0]=t[0]/e[0],n[1]=t[1]/e[1],n[2]=t[2]/e[2],n}function Jt(n,t){return n[0]=Math.ceil(t[0]),n[1]=Math.ceil(t[1]),n[2]=Math.ceil(t[2]),n}function ne(n,t){return n[0]=Math.floor(t[0]),n[1]=Math.floor(t[1]),n[2]=Math.floor(t[2]),n}function te(n,t,e){return n[0]=Math.min(t[0],e[0]),n[1]=Math.min(t[1],e[1]),n[2]=Math.min(t[2],e[2]),n}function ee(n,t,e){return n[0]=Math.max(t[0],e[0]),n[1]=Math.max(t[1],e[1]),n[2]=Math.max(t[2],e[2]),n}function re(n,t){return n[0]=Math.round(t[0]),n[1]=Math.round(t[1]),n[2]=Math.round(t[2]),n}function ae(n,t,e){return n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n}function oe(n,t,e,r){return n[0]=t[0]+e[0]*r,n[1]=t[1]+e[1]*r,n[2]=t[2]+e[2]*r,n}function ie(n,t){var e=t[0]-n[0],r=t[1]-n[1],a=t[2]-n[2];return Math.hypot(e,r,a)}function ue(n,t){var e=t[0]-n[0],r=t[1]-n[1],a=t[2]-n[2];return e*e+r*r+a*a}function se(n){var t=n[0],e=n[1],r=n[2];return t*t+e*e+r*r}function ce(n,t){return n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n}function fe(n,t){return n[0]=1/t[0],n[1]=1/t[1],n[2]=1/t[2],n}function de(n,t){var e=t[0],r=t[1],a=t[2],o=e*e+r*r+a*a;return o>0&&(o=1/Math.sqrt(o)),n[0]=t[0]*o,n[1]=t[1]*o,n[2]=t[2]*o,n}function le(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function me(n,t,e){var r=t[0],a=t[1],o=t[2],i=e[0],u=e[1],s=e[2];return n[0]=a*s-o*u,n[1]=o*i-r*s,n[2]=r*u-a*i,n}function he(n,t,e,r){var a=t[0],o=t[1],i=t[2];return n[0]=a+r*(e[0]-a),n[1]=o+r*(e[1]-o),n[2]=i+r*(e[2]-i),n}function ve(n,t,e,r,a,o){var i=o*o,u=i*(2*o-3)+1,s=i*(o-2)+o,c=i*(o-1),f=i*(3-2*o);return n[0]=t[0]*u+e[0]*s+r[0]*c+a[0]*f,n[1]=t[1]*u+e[1]*s+r[1]*c+a[1]*f,n[2]=t[2]*u+e[2]*s+r[2]*c+a[2]*f,n}function pe(n,t,e,r,a,o){var i=1-o,u=i*i,s=o*o,c=u*i,f=3*o*u,d=3*s*i,l=s*o;return n[0]=t[0]*c+e[0]*f+r[0]*d+a[0]*l,n[1]=t[1]*c+e[1]*f+r[1]*d+a[1]*l,n[2]=t[2]*c+e[2]*f+r[2]*d+a[2]*l,n}function ge(n,t){t=t||1;var e=2*v()*Math.PI,r=2*v()-1,a=Math.sqrt(1-r*r)*t;return n[0]=Math.cos(e)*a,n[1]=Math.sin(e)*a,n[2]=r*t,n}function Me(n,t,e){var r=t[0],a=t[1],o=t[2],i=e[3]*r+e[7]*a+e[11]*o+e[15];return i=i||1,n[0]=(e[0]*r+e[4]*a+e[8]*o+e[12])/i,n[1]=(e[1]*r+e[5]*a+e[9]*o+e[13])/i,n[2]=(e[2]*r+e[6]*a+e[10]*o+e[14])/i,n}function _e(n,t,e){var r=t[0],a=t[1],o=t[2];return n[0]=r*e[0]+a*e[3]+o*e[6],n[1]=r*e[1]+a*e[4]+o*e[7],n[2]=r*e[2]+a*e[5]+o*e[8],n}function be(n,t,e){var r=e[0],a=e[1],o=e[2],i=e[3],u=t[0],s=t[1],c=t[2],f=a*c-o*s,d=o*u-r*c,l=r*s-a*u,m=a*l-o*d,h=o*f-r*l,v=r*d-a*f,p=2*i;return f*=p,d*=p,l*=p,m*=2,h*=2,v*=2,n[0]=u+f+m,n[1]=s+d+h,n[2]=c+l+v,n}function xe(n,t,e,r){var a=[],o=[];return a[0]=t[0]-e[0],a[1]=t[1]-e[1],a[2]=t[2]-e[2],o[0]=a[0],o[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),o[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),n[0]=o[0]+e[0],n[1]=o[1]+e[1],n[2]=o[2]+e[2],n}function Re(n,t,e,r){var a=[],o=[];return a[0]=t[0]-e[0],a[1]=t[1]-e[1],a[2]=t[2]-e[2],o[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),o[1]=a[1],o[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),n[0]=o[0]+e[0],n[1]=o[1]+e[1],n[2]=o[2]+e[2],n}function Se(n,t,e,r){var a=[],o=[];return a[0]=t[0]-e[0],a[1]=t[1]-e[1],a[2]=t[2]-e[2],o[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),o[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),o[2]=a[2],n[0]=o[0]+e[0],n[1]=o[1]+e[1],n[2]=o[2]+e[2],n}function ye(n,t){var e=zt(n[0],n[1],n[2]),r=zt(t[0],t[1],t[2]);de(e,e),de(r,r);var a=le(e,r);return a>1?0:a<-1?Math.PI:Math.acos(a)}function Ee(n){return n[0]=0,n[1]=0,n[2]=0,n}function Ae(n){return"vec3("+n[0]+", "+n[1]+", "+n[2]+")"}function Te(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]}function we(n,t){var e=n[0],r=n[1],a=n[2],o=t[0],i=t[1],u=t[2];return Math.abs(e-o)<=m*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(r-i)<=m*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(a-u)<=m*Math.max(1,Math.abs(a),Math.abs(u))}var Le,Ie=Zt,Ue=$t,Ce=Kt,Pe=ie,De=ue,Oe=Gt,Fe=se,ke=(Le=jt(),function(n,t,e,r,a,o){var i,u;for(t||(t=3),e||(e=0),u=r?Math.min(r*t+e,n.length):n.length,i=e;i<u;i+=t)Le[0]=n[i],Le[1]=n[i+1],Le[2]=n[i+2],a(Le,Le,o),n[i]=Le[0],n[i+1]=Le[1],n[i+2]=Le[2];return n});function Be(){var n=new h(4);return h!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0),n}function qe(n){var t=new h(4);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}function Ne(n,t,e,r){var a=new h(4);return a[0]=n,a[1]=t,a[2]=e,a[3]=r,a}function Ve(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n}function Xe(n,t,e,r,a){return n[0]=t,n[1]=e,n[2]=r,n[3]=a,n}function je(n,t,e){return n[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n[3]=t[3]+e[3],n}function He(n,t,e){return n[0]=t[0]-e[0],n[1]=t[1]-e[1],n[2]=t[2]-e[2],n[3]=t[3]-e[3],n}function Ge(n,t,e){return n[0]=t[0]*e[0],n[1]=t[1]*e[1],n[2]=t[2]*e[2],n[3]=t[3]*e[3],n}function ze(n,t,e){return n[0]=t[0]/e[0],n[1]=t[1]/e[1],n[2]=t[2]/e[2],n[3]=t[3]/e[3],n}function Qe(n,t){return n[0]=Math.ceil(t[0]),n[1]=Math.ceil(t[1]),n[2]=Math.ceil(t[2]),n[3]=Math.ceil(t[3]),n}function Ye(n,t){return n[0]=Math.floor(t[0]),n[1]=Math.floor(t[1]),n[2]=Math.floor(t[2]),n[3]=Math.floor(t[3]),n}function We(n,t,e){return n[0]=Math.min(t[0],e[0]),n[1]=Math.min(t[1],e[1]),n[2]=Math.min(t[2],e[2]),n[3]=Math.min(t[3],e[3]),n}function Ze(n,t,e){return n[0]=Math.max(t[0],e[0]),n[1]=Math.max(t[1],e[1]),n[2]=Math.max(t[2],e[2]),n[3]=Math.max(t[3],e[3]),n}function $e(n,t){return n[0]=Math.round(t[0]),n[1]=Math.round(t[1]),n[2]=Math.round(t[2]),n[3]=Math.round(t[3]),n}function Ke(n,t,e){return n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n[3]=t[3]*e,n}function Je(n,t,e,r){return n[0]=t[0]+e[0]*r,n[1]=t[1]+e[1]*r,n[2]=t[2]+e[2]*r,n[3]=t[3]+e[3]*r,n}function nr(n,t){var e=t[0]-n[0],r=t[1]-n[1],a=t[2]-n[2],o=t[3]-n[3];return Math.hypot(e,r,a,o)}function tr(n,t){var e=t[0]-n[0],r=t[1]-n[1],a=t[2]-n[2],o=t[3]-n[3];return e*e+r*r+a*a+o*o}function er(n){var t=n[0],e=n[1],r=n[2],a=n[3];return Math.hypot(t,e,r,a)}function rr(n){var t=n[0],e=n[1],r=n[2],a=n[3];return t*t+e*e+r*r+a*a}function ar(n,t){return n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n[3]=-t[3],n}function or(n,t){return n[0]=1/t[0],n[1]=1/t[1],n[2]=1/t[2],n[3]=1/t[3],n}function ir(n,t){var e=t[0],r=t[1],a=t[2],o=t[3],i=e*e+r*r+a*a+o*o;return i>0&&(i=1/Math.sqrt(i)),n[0]=e*i,n[1]=r*i,n[2]=a*i,n[3]=o*i,n}function ur(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]}function sr(n,t,e,r){var a=e[0]*r[1]-e[1]*r[0],o=e[0]*r[2]-e[2]*r[0],i=e[0]*r[3]-e[3]*r[0],u=e[1]*r[2]-e[2]*r[1],s=e[1]*r[3]-e[3]*r[1],c=e[2]*r[3]-e[3]*r[2],f=t[0],d=t[1],l=t[2],m=t[3];return n[0]=d*c-l*s+m*u,n[1]=-f*c+l*i-m*o,n[2]=f*s-d*i+m*a,n[3]=-f*u+d*o-l*a,n}function cr(n,t,e,r){var a=t[0],o=t[1],i=t[2],u=t[3];return n[0]=a+r*(e[0]-a),n[1]=o+r*(e[1]-o),n[2]=i+r*(e[2]-i),n[3]=u+r*(e[3]-u),n}function fr(n,t){var e,r,a,o,i,u;t=t||1;do{i=(e=2*v()-1)*e+(r=2*v()-1)*r}while(i>=1);do{u=(a=2*v()-1)*a+(o=2*v()-1)*o}while(u>=1);var s=Math.sqrt((1-i)/u);return n[0]=t*e,n[1]=t*r,n[2]=t*a*s,n[3]=t*o*s,n}function dr(n,t,e){var r=t[0],a=t[1],o=t[2],i=t[3];return n[0]=e[0]*r+e[4]*a+e[8]*o+e[12]*i,n[1]=e[1]*r+e[5]*a+e[9]*o+e[13]*i,n[2]=e[2]*r+e[6]*a+e[10]*o+e[14]*i,n[3]=e[3]*r+e[7]*a+e[11]*o+e[15]*i,n}function lr(n,t,e){var r=t[0],a=t[1],o=t[2],i=e[0],u=e[1],s=e[2],c=e[3],f=c*r+u*o-s*a,d=c*a+s*r-i*o,l=c*o+i*a-u*r,m=-i*r-u*a-s*o;return n[0]=f*c+m*-i+d*-s-l*-u,n[1]=d*c+m*-u+l*-i-f*-s,n[2]=l*c+m*-s+f*-u-d*-i,n[3]=t[3],n}function mr(n){return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n}function hr(n){return"vec4("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+")"}function vr(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]&&n[3]===t[3]}function pr(n,t){var e=n[0],r=n[1],a=n[2],o=n[3],i=t[0],u=t[1],s=t[2],c=t[3];return Math.abs(e-i)<=m*Math.max(1,Math.abs(e),Math.abs(i))&&Math.abs(r-u)<=m*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(a-s)<=m*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(o-c)<=m*Math.max(1,Math.abs(o),Math.abs(c))}var gr=He,Mr=Ge,_r=ze,br=nr,xr=tr,Rr=er,Sr=rr,yr=function(){var n=Be();return function(t,e,r,a,o,i){var u,s;for(e||(e=4),r||(r=0),s=a?Math.min(a*e+r,t.length):t.length,u=r;u<s;u+=e)n[0]=t[u],n[1]=t[u+1],n[2]=t[u+2],n[3]=t[u+3],o(n,n,i),t[u]=n[0],t[u+1]=n[1],t[u+2]=n[2],t[u+3]=n[3];return t}}();function Er(){var n=new h(4);return h!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n[3]=1,n}function Ar(n){return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n}function Tr(n,t,e){e*=.5;var r=Math.sin(e);return n[0]=r*t[0],n[1]=r*t[1],n[2]=r*t[2],n[3]=Math.cos(e),n}function wr(n,t){var e=2*Math.acos(t[3]),r=Math.sin(e/2);return r>m?(n[0]=t[0]/r,n[1]=t[1]/r,n[2]=t[2]/r):(n[0]=1,n[1]=0,n[2]=0),e}function Lr(n,t){var e=aa(n,t);return Math.acos(2*e*e-1)}function Ir(n,t,e){var r=t[0],a=t[1],o=t[2],i=t[3],u=e[0],s=e[1],c=e[2],f=e[3];return n[0]=r*f+i*u+a*c-o*s,n[1]=a*f+i*s+o*u-r*c,n[2]=o*f+i*c+r*s-a*u,n[3]=i*f-r*u-a*s-o*c,n}function Ur(n,t,e){e*=.5;var r=t[0],a=t[1],o=t[2],i=t[3],u=Math.sin(e),s=Math.cos(e);return n[0]=r*s+i*u,n[1]=a*s+o*u,n[2]=o*s-a*u,n[3]=i*s-r*u,n}function Cr(n,t,e){e*=.5;var r=t[0],a=t[1],o=t[2],i=t[3],u=Math.sin(e),s=Math.cos(e);return n[0]=r*s-o*u,n[1]=a*s+i*u,n[2]=o*s+r*u,n[3]=i*s-a*u,n}function Pr(n,t,e){e*=.5;var r=t[0],a=t[1],o=t[2],i=t[3],u=Math.sin(e),s=Math.cos(e);return n[0]=r*s+a*u,n[1]=a*s-r*u,n[2]=o*s+i*u,n[3]=i*s-o*u,n}function Dr(n,t){var e=t[0],r=t[1],a=t[2];return n[0]=e,n[1]=r,n[2]=a,n[3]=Math.sqrt(Math.abs(1-e*e-r*r-a*a)),n}function Or(n,t){var e=t[0],r=t[1],a=t[2],o=t[3],i=Math.sqrt(e*e+r*r+a*a),u=Math.exp(o),s=i>0?u*Math.sin(i)/i:0;return n[0]=e*s,n[1]=r*s,n[2]=a*s,n[3]=u*Math.cos(i),n}function Fr(n,t){var e=t[0],r=t[1],a=t[2],o=t[3],i=Math.sqrt(e*e+r*r+a*a),u=i>0?Math.atan2(i,o)/i:0;return n[0]=e*u,n[1]=r*u,n[2]=a*u,n[3]=.5*Math.log(e*e+r*r+a*a+o*o),n}function kr(n,t,e){return Fr(n,t),ra(n,n,e),Or(n,n),n}function Br(n,t,e,r){var a,o,i,u,s,c=t[0],f=t[1],d=t[2],l=t[3],h=e[0],v=e[1],p=e[2],g=e[3];return(o=c*h+f*v+d*p+l*g)<0&&(o=-o,h=-h,v=-v,p=-p,g=-g),1-o>m?(a=Math.acos(o),i=Math.sin(a),u=Math.sin((1-r)*a)/i,s=Math.sin(r*a)/i):(u=1-r,s=r),n[0]=u*c+s*h,n[1]=u*f+s*v,n[2]=u*d+s*p,n[3]=u*l+s*g,n}function qr(n){var t=v(),e=v(),r=v(),a=Math.sqrt(1-t),o=Math.sqrt(t);return n[0]=a*Math.sin(2*Math.PI*e),n[1]=a*Math.cos(2*Math.PI*e),n[2]=o*Math.sin(2*Math.PI*r),n[3]=o*Math.cos(2*Math.PI*r),n}function Nr(n,t){var e=t[0],r=t[1],a=t[2],o=t[3],i=e*e+r*r+a*a+o*o,u=i?1/i:0;return n[0]=-e*u,n[1]=-r*u,n[2]=-a*u,n[3]=o*u,n}function Vr(n,t){return n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n[3]=t[3],n}function Xr(n,t){var e,r=t[0]+t[4]+t[8];if(r>0)e=Math.sqrt(r+1),n[3]=.5*e,e=.5/e,n[0]=(t[5]-t[7])*e,n[1]=(t[6]-t[2])*e,n[2]=(t[1]-t[3])*e;else{var a=0;t[4]>t[0]&&(a=1),t[8]>t[3*a+a]&&(a=2);var o=(a+1)%3,i=(a+2)%3;e=Math.sqrt(t[3*a+a]-t[3*o+o]-t[3*i+i]+1),n[a]=.5*e,e=.5/e,n[3]=(t[3*o+i]-t[3*i+o])*e,n[o]=(t[3*o+a]+t[3*a+o])*e,n[i]=(t[3*i+a]+t[3*a+i])*e}return n}function jr(n,t,e,r){var a=.5*Math.PI/180;t*=a,e*=a,r*=a;var o=Math.sin(t),i=Math.cos(t),u=Math.sin(e),s=Math.cos(e),c=Math.sin(r),f=Math.cos(r);return n[0]=o*s*f-i*u*c,n[1]=i*u*f+o*s*c,n[2]=i*s*c-o*u*f,n[3]=i*s*f+o*u*c,n}function Hr(n){return"quat("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+")"}var Gr,zr,Qr,Yr,Wr,Zr,$r=qe,Kr=Ne,Jr=Ve,na=Xe,ta=je,ea=Ir,ra=Ke,aa=ur,oa=cr,ia=er,ua=ia,sa=rr,ca=sa,fa=ir,da=vr,la=pr,ma=(Gr=jt(),zr=zt(1,0,0),Qr=zt(0,1,0),function(n,t,e){var r=le(t,e);return r<-.999999?(me(Gr,zr,t),Oe(Gr)<1e-6&&me(Gr,Qr,t),de(Gr,Gr),Tr(n,Gr,Math.PI),n):r>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(me(Gr,t,e),n[0]=Gr[0],n[1]=Gr[1],n[2]=Gr[2],n[3]=1+r,fa(n,n))}),ha=(Yr=Er(),Wr=Er(),function(n,t,e,r,a,o){return Br(Yr,t,a,o),Br(Wr,e,r,o),Br(n,Yr,Wr,2*o*(1-o)),n}),va=(Zr=Mn(),function(n,t,e,r){return Zr[0]=e[0],Zr[3]=e[1],Zr[6]=e[2],Zr[1]=r[0],Zr[4]=r[1],Zr[7]=r[2],Zr[2]=-t[0],Zr[5]=-t[1],Zr[8]=-t[2],fa(n,Xr(n,Zr))});function pa(){var n=new h(8);return h!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[4]=0,n[5]=0,n[6]=0,n[7]=0),n[3]=1,n}function ga(n){var t=new h(8);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t}function Ma(n,t,e,r,a,o,i,u){var s=new h(8);return s[0]=n,s[1]=t,s[2]=e,s[3]=r,s[4]=a,s[5]=o,s[6]=i,s[7]=u,s}function _a(n,t,e,r,a,o,i){var u=new h(8);u[0]=n,u[1]=t,u[2]=e,u[3]=r;var s=.5*a,c=.5*o,f=.5*i;return u[4]=s*r+c*e-f*t,u[5]=c*r+f*n-s*e,u[6]=f*r+s*t-c*n,u[7]=-s*n-c*t-f*e,u}function ba(n,t,e){var r=.5*e[0],a=.5*e[1],o=.5*e[2],i=t[0],u=t[1],s=t[2],c=t[3];return n[0]=i,n[1]=u,n[2]=s,n[3]=c,n[4]=r*c+a*s-o*u,n[5]=a*c+o*i-r*s,n[6]=o*c+r*u-a*i,n[7]=-r*i-a*u-o*s,n}function xa(n,t){return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n[4]=.5*t[0],n[5]=.5*t[1],n[6]=.5*t[2],n[7]=0,n}function Ra(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=0,n[5]=0,n[6]=0,n[7]=0,n}function Sa(n,t){var e=Er();St(e,t);var r=new h(3);return xt(r,t),ba(n,e,r),n}function ya(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n}function Ea(n){return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n[4]=0,n[5]=0,n[6]=0,n[7]=0,n}function Aa(n,t,e,r,a,o,i,u,s){return n[0]=t,n[1]=e,n[2]=r,n[3]=a,n[4]=o,n[5]=i,n[6]=u,n[7]=s,n}var Ta=Jr;function wa(n,t){return n[0]=t[4],n[1]=t[5],n[2]=t[6],n[3]=t[7],n}var La=Jr;function Ia(n,t){return n[4]=t[0],n[5]=t[1],n[6]=t[2],n[7]=t[3],n}function Ua(n,t){var e=t[4],r=t[5],a=t[6],o=t[7],i=-t[0],u=-t[1],s=-t[2],c=t[3];return n[0]=2*(e*c+o*i+r*s-a*u),n[1]=2*(r*c+o*u+a*i-e*s),n[2]=2*(a*c+o*s+e*u-r*i),n}function Ca(n,t,e){var r=t[0],a=t[1],o=t[2],i=t[3],u=.5*e[0],s=.5*e[1],c=.5*e[2],f=t[4],d=t[5],l=t[6],m=t[7];return n[0]=r,n[1]=a,n[2]=o,n[3]=i,n[4]=i*u+a*c-o*s+f,n[5]=i*s+o*u-r*c+d,n[6]=i*c+r*s-a*u+l,n[7]=-r*u-a*s-o*c+m,n}function Pa(n,t,e){var r=-t[0],a=-t[1],o=-t[2],i=t[3],u=t[4],s=t[5],c=t[6],f=t[7],d=u*i+f*r+s*o-c*a,l=s*i+f*a+c*r-u*o,m=c*i+f*o+u*a-s*r,h=f*i-u*r-s*a-c*o;return Ur(n,t,e),r=n[0],a=n[1],o=n[2],i=n[3],n[4]=d*i+h*r+l*o-m*a,n[5]=l*i+h*a+m*r-d*o,n[6]=m*i+h*o+d*a-l*r,n[7]=h*i-d*r-l*a-m*o,n}function Da(n,t,e){var r=-t[0],a=-t[1],o=-t[2],i=t[3],u=t[4],s=t[5],c=t[6],f=t[7],d=u*i+f*r+s*o-c*a,l=s*i+f*a+c*r-u*o,m=c*i+f*o+u*a-s*r,h=f*i-u*r-s*a-c*o;return Cr(n,t,e),r=n[0],a=n[1],o=n[2],i=n[3],n[4]=d*i+h*r+l*o-m*a,n[5]=l*i+h*a+m*r-d*o,n[6]=m*i+h*o+d*a-l*r,n[7]=h*i-d*r-l*a-m*o,n}function Oa(n,t,e){var r=-t[0],a=-t[1],o=-t[2],i=t[3],u=t[4],s=t[5],c=t[6],f=t[7],d=u*i+f*r+s*o-c*a,l=s*i+f*a+c*r-u*o,m=c*i+f*o+u*a-s*r,h=f*i-u*r-s*a-c*o;return Pr(n,t,e),r=n[0],a=n[1],o=n[2],i=n[3],n[4]=d*i+h*r+l*o-m*a,n[5]=l*i+h*a+m*r-d*o,n[6]=m*i+h*o+d*a-l*r,n[7]=h*i-d*r-l*a-m*o,n}function Fa(n,t,e){var r=e[0],a=e[1],o=e[2],i=e[3],u=t[0],s=t[1],c=t[2],f=t[3];return n[0]=u*i+f*r+s*o-c*a,n[1]=s*i+f*a+c*r-u*o,n[2]=c*i+f*o+u*a-s*r,n[3]=f*i-u*r-s*a-c*o,u=t[4],s=t[5],c=t[6],f=t[7],n[4]=u*i+f*r+s*o-c*a,n[5]=s*i+f*a+c*r-u*o,n[6]=c*i+f*o+u*a-s*r,n[7]=f*i-u*r-s*a-c*o,n}function ka(n,t,e){var r=t[0],a=t[1],o=t[2],i=t[3],u=e[0],s=e[1],c=e[2],f=e[3];return n[0]=r*f+i*u+a*c-o*s,n[1]=a*f+i*s+o*u-r*c,n[2]=o*f+i*c+r*s-a*u,n[3]=i*f-r*u-a*s-o*c,u=e[4],s=e[5],c=e[6],f=e[7],n[4]=r*f+i*u+a*c-o*s,n[5]=a*f+i*s+o*u-r*c,n[6]=o*f+i*c+r*s-a*u,n[7]=i*f-r*u-a*s-o*c,n}function Ba(n,t,e,r){if(Math.abs(r)<m)return ya(n,t);var a=Math.hypot(e[0],e[1],e[2]);r*=.5;var o=Math.sin(r),i=o*e[0]/a,u=o*e[1]/a,s=o*e[2]/a,c=Math.cos(r),f=t[0],d=t[1],l=t[2],h=t[3];n[0]=f*c+h*i+d*s-l*u,n[1]=d*c+h*u+l*i-f*s,n[2]=l*c+h*s+f*u-d*i,n[3]=h*c-f*i-d*u-l*s;var v=t[4],p=t[5],g=t[6],M=t[7];return n[4]=v*c+M*i+p*s-g*u,n[5]=p*c+M*u+g*i-v*s,n[6]=g*c+M*s+v*u-p*i,n[7]=M*c-v*i-p*u-g*s,n}function qa(n,t,e){return n[0]=t[0]+e[0],n[1]=t[1]+e[1],n[2]=t[2]+e[2],n[3]=t[3]+e[3],n[4]=t[4]+e[4],n[5]=t[5]+e[5],n[6]=t[6]+e[6],n[7]=t[7]+e[7],n}function Na(n,t,e){var r=t[0],a=t[1],o=t[2],i=t[3],u=e[4],s=e[5],c=e[6],f=e[7],d=t[4],l=t[5],m=t[6],h=t[7],v=e[0],p=e[1],g=e[2],M=e[3];return n[0]=r*M+i*v+a*g-o*p,n[1]=a*M+i*p+o*v-r*g,n[2]=o*M+i*g+r*p-a*v,n[3]=i*M-r*v-a*p-o*g,n[4]=r*f+i*u+a*c-o*s+d*M+h*v+l*g-m*p,n[5]=a*f+i*s+o*u-r*c+l*M+h*p+m*v-d*g,n[6]=o*f+i*c+r*s-a*u+m*M+h*g+d*p-l*v,n[7]=i*f-r*u-a*s-o*c+h*M-d*v-l*p-m*g,n}var Va=Na;function Xa(n,t,e){return n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e,n[3]=t[3]*e,n[4]=t[4]*e,n[5]=t[5]*e,n[6]=t[6]*e,n[7]=t[7]*e,n}var ja=aa;function Ha(n,t,e,r){var a=1-r;return ja(t,e)<0&&(r=-r),n[0]=t[0]*a+e[0]*r,n[1]=t[1]*a+e[1]*r,n[2]=t[2]*a+e[2]*r,n[3]=t[3]*a+e[3]*r,n[4]=t[4]*a+e[4]*r,n[5]=t[5]*a+e[5]*r,n[6]=t[6]*a+e[6]*r,n[7]=t[7]*a+e[7]*r,n}function Ga(n,t){var e=Wa(t);return n[0]=-t[0]/e,n[1]=-t[1]/e,n[2]=-t[2]/e,n[3]=t[3]/e,n[4]=-t[4]/e,n[5]=-t[5]/e,n[6]=-t[6]/e,n[7]=t[7]/e,n}function za(n,t){return n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n[3]=t[3],n[4]=-t[4],n[5]=-t[5],n[6]=-t[6],n[7]=t[7],n}var Qa=ia,Ya=Qa,Wa=sa,Za=Wa;function $a(n,t){var e=Wa(t);if(e>0){e=Math.sqrt(e);var r=t[0]/e,a=t[1]/e,o=t[2]/e,i=t[3]/e,u=t[4],s=t[5],c=t[6],f=t[7],d=r*u+a*s+o*c+i*f;n[0]=r,n[1]=a,n[2]=o,n[3]=i,n[4]=(u-r*d)/e,n[5]=(s-a*d)/e,n[6]=(c-o*d)/e,n[7]=(f-i*d)/e}return n}function Ka(n){return"quat2("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+", "+n[6]+", "+n[7]+")"}function Ja(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]&&n[3]===t[3]&&n[4]===t[4]&&n[5]===t[5]&&n[6]===t[6]&&n[7]===t[7]}function no(n,t){var e=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],s=n[6],c=n[7],f=t[0],d=t[1],l=t[2],h=t[3],v=t[4],p=t[5],g=t[6],M=t[7];return Math.abs(e-f)<=m*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(r-d)<=m*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(a-l)<=m*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(o-h)<=m*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(i-v)<=m*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(u-p)<=m*Math.max(1,Math.abs(u),Math.abs(p))&&Math.abs(s-g)<=m*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(c-M)<=m*Math.max(1,Math.abs(c),Math.abs(M))}function to(){var n=new h(2);return h!=Float32Array&&(n[0]=0,n[1]=0),n}function eo(n){var t=new h(2);return t[0]=n[0],t[1]=n[1],t}function ro(n,t){var e=new h(2);return e[0]=n,e[1]=t,e}function ao(n,t){return n[0]=t[0],n[1]=t[1],n}function oo(n,t,e){return n[0]=t,n[1]=e,n}function io(n,t,e){return n[0]=t[0]+e[0],n[1]=t[1]+e[1],n}function uo(n,t,e){return n[0]=t[0]-e[0],n[1]=t[1]-e[1],n}function so(n,t,e){return n[0]=t[0]*e[0],n[1]=t[1]*e[1],n}function co(n,t,e){return n[0]=t[0]/e[0],n[1]=t[1]/e[1],n}function fo(n,t){return n[0]=Math.ceil(t[0]),n[1]=Math.ceil(t[1]),n}function lo(n,t){return n[0]=Math.floor(t[0]),n[1]=Math.floor(t[1]),n}function mo(n,t,e){return n[0]=Math.min(t[0],e[0]),n[1]=Math.min(t[1],e[1]),n}function ho(n,t,e){return n[0]=Math.max(t[0],e[0]),n[1]=Math.max(t[1],e[1]),n}function vo(n,t){return n[0]=Math.round(t[0]),n[1]=Math.round(t[1]),n}function po(n,t,e){return n[0]=t[0]*e,n[1]=t[1]*e,n}function go(n,t,e,r){return n[0]=t[0]+e[0]*r,n[1]=t[1]+e[1]*r,n}function Mo(n,t){var e=t[0]-n[0],r=t[1]-n[1];return Math.hypot(e,r)}function _o(n,t){var e=t[0]-n[0],r=t[1]-n[1];return e*e+r*r}function bo(n){var t=n[0],e=n[1];return Math.hypot(t,e)}function xo(n){var t=n[0],e=n[1];return t*t+e*e}function Ro(n,t){return n[0]=-t[0],n[1]=-t[1],n}function So(n,t){return n[0]=1/t[0],n[1]=1/t[1],n}function yo(n,t){var e=t[0],r=t[1],a=e*e+r*r;return a>0&&(a=1/Math.sqrt(a)),n[0]=t[0]*a,n[1]=t[1]*a,n}function Eo(n,t){return n[0]*t[0]+n[1]*t[1]}function Ao(n,t,e){var r=t[0]*e[1]-t[1]*e[0];return n[0]=n[1]=0,n[2]=r,n}function To(n,t,e,r){var a=t[0],o=t[1];return n[0]=a+r*(e[0]-a),n[1]=o+r*(e[1]-o),n}function wo(n,t){t=t||1;var e=2*v()*Math.PI;return n[0]=Math.cos(e)*t,n[1]=Math.sin(e)*t,n}function Lo(n,t,e){var r=t[0],a=t[1];return n[0]=e[0]*r+e[2]*a,n[1]=e[1]*r+e[3]*a,n}function Io(n,t,e){var r=t[0],a=t[1];return n[0]=e[0]*r+e[2]*a+e[4],n[1]=e[1]*r+e[3]*a+e[5],n}function Uo(n,t,e){var r=t[0],a=t[1];return n[0]=e[0]*r+e[3]*a+e[6],n[1]=e[1]*r+e[4]*a+e[7],n}function Co(n,t,e){var r=t[0],a=t[1];return n[0]=e[0]*r+e[4]*a+e[12],n[1]=e[1]*r+e[5]*a+e[13],n}function Po(n,t,e,r){var a=t[0]-e[0],o=t[1]-e[1],i=Math.sin(r),u=Math.cos(r);return n[0]=a*u-o*i+e[0],n[1]=a*i+o*u+e[1],n}function Do(n,t){var e=n[0],r=n[1],a=t[0],o=t[1],i=e*e+r*r;i>0&&(i=1/Math.sqrt(i));var u=a*a+o*o;u>0&&(u=1/Math.sqrt(u));var s=(e*a+r*o)*i*u;return s>1?0:s<-1?Math.PI:Math.acos(s)}function Oo(n){return n[0]=0,n[1]=0,n}function Fo(n){return"vec2("+n[0]+", "+n[1]+")"}function ko(n,t){return n[0]===t[0]&&n[1]===t[1]}function Bo(n,t){var e=n[0],r=n[1],a=t[0],o=t[1];return Math.abs(e-a)<=m*Math.max(1,Math.abs(e),Math.abs(a))&&Math.abs(r-o)<=m*Math.max(1,Math.abs(r),Math.abs(o))}var qo=bo,No=uo,Vo=so,Xo=co,jo=Mo,Ho=_o,Go=xo,zo=function(){var n=to();return function(t,e,r,a,o,i){var u,s;for(e||(e=2),r||(r=0),s=a?Math.min(a*e+r,t.length):t.length,u=r;u<s;u+=e)n[0]=t[u],n[1]=t[u+1],o(n,n,i),t[u]=n[0],t[u+1]=n[1];return t}}();e.d(t,"glMatrix",function(){return r}),e.d(t,"mat2",function(){return a}),e.d(t,"mat2d",function(){return o}),e.d(t,"mat3",function(){return i}),e.d(t,"mat4",function(){return u}),e.d(t,"quat",function(){return f}),e.d(t,"quat2",function(){return d}),e.d(t,"vec2",function(){return l}),e.d(t,"vec3",function(){return s}),e.d(t,"vec4",function(){return c})},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(0),a=e(5),o=r.vec2.create(),i=r.vec3.create();t.Camera={create:function(){return{pos:r.vec2.create(),viewRadius:20,aspectRatio:1}},clone:function(n){return t.Camera.copy(t.Camera.create(),n)},copy:function(n,e){return t.Camera.lerp(n,e,e,0)},lerp:function(n,t,e,o){return r.vec2.lerp(n.pos,t.pos,e.pos,o),n.viewRadius=a.numberLerp(0,t.viewRadius,e.viewRadius,o),n.aspectRatio=a.numberLerp(0,t.aspectRatio,e.aspectRatio,o),n},getViewMatrix:function(n,t){return r.mat4.identity(t),i[0]=-n.pos[0],i[1]=-n.pos[1],i[2]=-10,r.mat4.translate(t,t,i)},getVisibleBoundsSize:function(n,t){return n.aspectRatio>=1?(t[0]=n.viewRadius*n.aspectRatio,t[1]=n.viewRadius):(t[0]=n.viewRadius,t[1]=n.viewRadius/n.aspectRatio),t},getVisibleRect:function(n,e){return t.Camera.getVisibleBoundsSize(n,o),e.xmin=n.pos[0]-o[0],e.xmax=n.pos[0]+o[0],e.ymin=n.pos[1]-o[1],e.ymax=n.pos[1]+o[1],e},getProjectionMatrix:function(n,e){return t.Camera.getVisibleBoundsSize(n,o),r.mat4.ortho(e,-o[0],o[0],-o[1],o[1],.1,100)}}},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=null;t.drawQuad=function(n,t,e){n.useProgram(t),null===r&&(r=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,r),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,1,-1,-1,1,-1,1,-1,1,1,-1,1]),n.STATIC_DRAW)),e&&e(t),n.bindBuffer(n.ARRAY_BUFFER,r);var a=n.getAttribLocation(t,"a_position");n.enableVertexAttribArray(a),n.vertexAttribPointer(a,2,n.FLOAT,!1,0,0),n.drawArrays(n.TRIANGLES,0,6)}},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(19),a=e(20),o=e(21),i=e(22),u=e(23),s=e(24),c=e(25),f=e(26),d=e(27),l=e(28),m=e(29),h=e(30),v={};t.getShaders=function(n){var t=n.canvas;return t.id in v||(v[t.id]=function(n){return{answer:g(n,"answer",r.default),background:g(n,"background",a.default),bean:g(n,"bean",o.default),dpad:g(n,"dpad",i.default),globalFade:g(n,"globalFade",u.default),menuItem:g(n,"menuItem",s.default),question:g(n,"question",c.default),snake:g(n,"snake",f.default),snakeFlash:g(n,"snakeFlash",d.default),snakeHead:g(n,"snakeHead",l.default),snakeShadow:g(n,"snakeShadow",m.default),title:g(n,"title",h.default)}}(n)),v[t.id]};var p=function(n,t,e){return"\n    <h1>Error in "+n+' shader in "'+t+'.glsl"</h1>\n    <code>'+e.replace(/\n/g,"<br/>")+"</code>\n"},g=function(n,t,e){var r=n.createShader(n.VERTEX_SHADER);n.shaderSource(r,"#define VERTEX\n"+e+"\n"),n.compileShader(r);var a=n.getShaderInfoLog(r);if(null===a||a.length>0)throw document.head.parentNode.removeChild(document.head),document.body.innerHTML=p("vertex",t,a),new Error("Error compiling shader: "+t);var o=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(o,"#define FRAGMENT\n"+e+"\n"),n.compileShader(o);var i=n.getShaderInfoLog(o);if(null===i||i.length>0)throw document.head.parentNode.removeChild(document.head),document.body.innerHTML=p("fragment",t,i),new Error("Error compiling shader: "+t);var u=n.createProgram();return n.attachShader(u,r),n.attachShader(u,o),n.linkProgram(u),u}},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(0);t.Transform={create:function(){return{position:r.vec3.create(),rotation:r.quat.create(),scale:r.vec3.fromValues(1,1,1)}},clone:function(n){return{position:r.vec3.clone(n.position),rotation:r.quat.clone(n.rotation),scale:r.vec3.clone(n.scale)}},toMatrix:function(n,t){var e=n;return r.mat4.fromRotationTranslationScale(t,e.rotation,e.position,e.scale)},identity:function(n){return n.position.fill(0),r.quat.identity(n.rotation),n.scale.fill(1),n}}},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.angleLerp=function(n,t,e,r){return t+r*(a=t,o=e,i=2*Math.PI,2*(u=(o-a)%i)%i-u);var a,o,i,u};var r=function(n,t,e){if(n.length>t)n.length=t;else if(n.length<t){var r=n.length;n.length=t;for(var a=r;a<n.length;++a)n[a]=e()}};t.numberLerp=function(n,t,e,r){return t+(e-t)*r},t.arrayLerp=function(n,t,e,a,o,i){r(n,e.length,o);for(var u=0;u<e.length;++u)n[u]=u<t.length?i(n[u],t[u],e[u],a):i(n[u],e[u],e[u],0);return n},t.arrayOfIDableLerp=function(n,t,e,a,o,i,u){r(n,e.length,i),o||(t.sort(function(n,t){return n.id-t.id}),e.sort(function(n,t){return n.id-t.id}));for(var s=0,c=0;s<e.length;++s)c>=t.length||t[c].id!==e[s].id?n[s]=u(n[s],e[s],e[s],0):n[s]=u(n[s],t[c++],e[s],a);return n}},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(5);t.Rect={create:function(){return{xmin:0,xmax:0,ymin:0,ymax:0}},fromValues:function(n,e,r,a){var o=t.Rect.create();return o.xmin=n,o.xmax=r,o.ymin=e,o.ymax=a,o},clone:function(n){return t.Rect.copy(t.Rect.create(),n)},copy:function(n,e){return t.Rect.lerp(n,e,e,0)},clear:function(n){return n.xmin=0,n.xmax=0,n.ymin=0,n.ymax=0,n},lerp:function(n,t,e,a){return n.xmin=r.numberLerp(0,t.xmin,e.xmin,a),n.xmax=r.numberLerp(0,t.xmax,e.xmax,a),n.ymin=r.numberLerp(0,t.ymin,e.ymin,a),n.ymax=r.numberLerp(0,t.ymax,e.ymax,a),n},setToPoint:function(n,t){return n.xmin=t[0],n.xmax=t[0],n.ymin=t[1],n.ymax=t[1],n},expandToContainPoint:function(n,t){return t[0]<n.xmin&&(n.xmin=t[0]),t[1]<n.ymin&&(n.ymin=t[1]),t[0]>n.xmax&&(n.xmax=t[0]),t[1]>n.ymax&&(n.ymax=t[1]),n},expandByRadius:function(n,t){return n.xmin-=t,n.xmax+=t,n.ymin-=t,n.ymax+=t,n},intersects:function(n,t){return!(n.ymin>t.ymax||t.ymin>n.ymax||n.xmin>t.xmax||t.xmin>n.xmax)},containsPoint:function(n,t){return t[0]>=n.xmin&&t[0]<=n.xmax&&t[1]>=n.ymin&&t[1]<=n.ymax}}},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(0),a=e(5),o=e(12),i=e(6),u=r.vec2.create(),s=r.vec2.create(),c=r.vec3.create(),f=r.quat.create(),d=r.quat.create(),l=r.quat.create();t.Flash={create:function(){return{segments:[],colorIndex:0,age:0,scale:1}},copy:function(n,e){return t.Flash.lerp(n,e,e,0)},lerp:function(n,t,e,o){return a.arrayLerp(n.segments,t.segments,e.segments,o,r.vec2.create,r.vec2.lerp),n.colorIndex=e.colorIndex,n.age=a.numberLerp(0,t.age,e.age,o),n.scale=e.scale,n},initFromSnake:function(n,t){n.segments=t.segments.map(function(n){return r.vec2.clone(n)}),n.colorIndex=t.colorIndex,n.scale=t.scale}},t.Snake={create:function(n){return{segments:[],partialSegments:0,lookAngle:0,speeding:!1,scale:1,colorIndex:Math.floor(6*Math.random()),personalityIndex:n||0,bounds:i.Rect.create(),speedDrain:0,speedDrainIter:0,botSpeeding:!1,alive:!0,botTarget:-1}},clone:function(n){return t.Snake.copy(t.Snake.create(n.personalityIndex),n)},copy:function(n,e){return t.Snake.lerp(n,e,e,0)},lerp:function(n,t,e,o){return a.arrayLerp(n.segments,t.segments,e.segments,o,r.vec2.create,r.vec2.lerp),n.partialSegments=e.partialSegments,n.lookAngle=a.angleLerp(0,t.lookAngle,e.lookAngle,o),n.speeding=e.speeding,n.scale=a.numberLerp(0,t.scale,e.scale,o),n.colorIndex=e.colorIndex,n.personalityIndex=e.personalityIndex,i.Rect.lerp(n.bounds,t.bounds,e.bounds,o),n.speedDrain=e.speedDrain,n.speedDrainIter=e.speedDrainIter,n.botSpeeding=e.botSpeeding,n.alive=e.alive,n.botTarget=e.botTarget,n},initialize:function(n){n.segments=o(0,20).map(function(n){return r.vec2.fromValues(0,0)})},deadAgainst:function(n,t){if(!i.Rect.intersects(n.bounds,t.bounds))return!1;for(var e=.9*(n.scale+t.scale),a=e*e,o=0;o<t.segments.length;o++){if(r.vec2.copy(u,t.segments[o]),r.vec2.sqrDist(n.segments[0],u)<a)return!0}return!1},updateInPlace:function(n,t,e){var a=r.vec2.sub(u,t,n.segments[0]);r.vec2.normalize(a,a);var o=r.quat.setAxisAngle(f,[0,0,1],n.lookAngle),m=r.quat.setAxisAngle(d,[0,0,1],Math.atan2(a[1],a[0])),h=r.quat.slerp(l,o,m,.1),v=r.vec3.transformQuat(c,[1,0,0],h);n.lookAngle=Math.atan2(v[1],v[0]),n.speeding=e&&n.segments.length>=10;var p=n.speeding?.66:.28*1.1;n.segments[0][0]+=p*v[0],n.segments[0][1]+=p*v[1],i.Rect.clear(n.bounds),i.Rect.setToPoint(n.bounds,n.segments[0]);for(var g=.3*n.scale,M=1;M<n.segments.length;++M){var _=r.vec2.sub(s,n.segments[M],n.segments[M-1]),b=r.vec2.length(_);b>g&&(r.vec2.scale(_,_,g/b),r.vec2.add(n.segments[M],n.segments[M-1],_)),i.Rect.expandToContainPoint(n.bounds,n.segments[M-1])}n.scale=n.segments.length>40?.2213*Math.sqrt(n.segments.length):1+.02*(n.segments.length-20),i.Rect.expandByRadius(n.bounds,n.scale);var x="normal";return n.speeding&&(n.speedDrain+=.08,n.speedDrain>=1&&(n.speedDrainIter++,n.speedDrain=0,x="spawnBean"),n.speedDrainIter>=3&&(n.speedDrainIter=0,n.segments.pop())),x},expandToLength:function(n,t){n.lookAngle=t+Math.PI,r.vec2.set(u,Math.cos(t),Math.sin(t)),n.scale=1+.02*(n.segments.length-20);for(var e=.3*n.scale,a=0;a<n.segments.length;++a)r.vec2.copy(s,u),r.vec2.scale(s,s,e*a),r.vec2.add(n.segments[a],n.segments[a],s)},addSegments:function(n,t){for(n.partialSegments+=t?18:1;n.partialSegments>=3;)n.partialSegments-=3,n.segments.push(r.vec2.clone(n.segments[n.segments.length-1]))},chopInHalf:function(n){n.segments.length=Math.floor(n.segments.length/2),n.partialSegments=0}}},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(0),a=e(1),o=e(2),i=e(3),u=e(4),s=e(6),c=u.Transform.create(),f=r.vec2.create(),d=r.mat4.create(),l=r.mat4.create(),m=r.mat4.create(),h=r.mat4.create(),v=r.mat4.create(),p=s.Rect.create(),g=[[.98,.6,.6],[.6,.98,.6],[.6,.6,.98],[.6,.98,.98],[.98,.6,.98],[.98,.98,.6]],M=function(){function n(n){this.gl=n}return n.visible=function(n,t){return a.Camera.getVisibleBoundsSize(t,f),p.xmin=t.pos[0]-f[0],p.xmax=t.pos[0]+f[0],p.ymin=t.pos[1]-f[1],p.ymax=t.pos[1]+f[1],s.Rect.intersects(p,n.bounds)},n.prototype.drawShadowPass=function(t,e,s){var f=this.gl;if(n.visible(e,t))for(var p=a.Camera.getViewMatrix(t,d),M=a.Camera.getProjectionMatrix(t,l),_=r.mat4.mul(m,M,p),b=function(n){var t=e.segments[n];c.position[0]=t[0],c.position[1]=t[1],c.scale[0]=e.scale,c.scale[1]=e.scale;var a=u.Transform.toMatrix(c,h),d=r.mat4.mul(v,_,a);o.drawQuad(f,i.getShaders(f).snakeShadow,function(t){f.uniform1f(f.getUniformLocation(t,"u_time"),s),f.uniform1f(f.getUniformLocation(t,"u_depth"),n),f.uniform1f(f.getUniformLocation(t,"u_speeding"),e.speeding?1:0),f.uniform3fv(f.getUniformLocation(t,"u_speedColor"),g[e.colorIndex]),f.uniformMatrix4fv(f.getUniformLocation(t,"u_mvp"),!1,d)})},x=e.segments.length-1;x>=0;--x)b(x)},n.prototype.drawSnakePass=function(t,e,s){var f=this.gl;if(n.visible(e,t))for(var p=a.Camera.getViewMatrix(t,d),M=a.Camera.getProjectionMatrix(t,l),_=r.mat4.mul(m,M,p),b=function(n){var t=e.segments[n];c.position[0]=t[0],c.position[1]=t[1],c.scale[0]=e.scale,c.scale[1]=e.scale;var a=u.Transform.toMatrix(c,h),d=r.mat4.mul(v,_,a),l=0===n?e.lookAngle:Math.atan2(e.segments[n-1][1]-e.segments[n][1],e.segments[n-1][0]-e.segments[n][0]);o.drawQuad(f,0===n?i.getShaders(f).snakeHead:i.getShaders(f).snake,function(t){f.uniform1f(f.getUniformLocation(t,"u_theta"),l),f.uniform1f(f.getUniformLocation(t,"u_time"),s),f.uniform1f(f.getUniformLocation(t,"u_depth"),n),f.uniform1f(f.getUniformLocation(t,"u_speeding"),e.speeding?1:0),f.uniform3fv(f.getUniformLocation(t,"u_color"),g[e.colorIndex]),f.uniformMatrix4fv(f.getUniformLocation(t,"u_mvp"),!1,d)})},x=e.segments.length-1;x>=0;--x)b(x)},n.prototype.drawFlash=function(n,t){for(var e=this.gl,s=a.Camera.getViewMatrix(n,d),f=a.Camera.getProjectionMatrix(n,l),p=r.mat4.mul(m,f,s),M=function(n){var a=t.segments[n];c.position[0]=a[0],c.position[1]=a[1];var s=1.5-t.age;c.scale[0]=t.scale*s,c.scale[1]=t.scale*s;var f=u.Transform.toMatrix(c,h),d=r.mat4.mul(v,p,f);o.drawQuad(e,i.getShaders(e).snakeFlash,function(r){e.uniform1f(e.getUniformLocation(r,"u_age"),t.age),e.uniform1f(e.getUniformLocation(r,"u_depth"),n),e.uniform3fv(e.getUniformLocation(r,"u_color"),g[t.colorIndex]),e.uniformMatrix4fv(e.getUniformLocation(r,"u_mvp"),!1,d)})},_=t.segments.length-1;_>=0;--_)M(_)},n}();t.SnakeRenderer=M},function(n,t){n.exports=function(n){var t=typeof n;return null!=n&&("object"==t||"function"==t)}},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(0),a=e(1),o=e(2),i=e(3),u=e(4),s=e(6),c=u.Transform.create(),f=r.mat4.create(),d=r.mat4.create(),l=r.mat4.create(),m=r.mat4.create(),h=r.mat4.create(),v=s.Rect.create(),p=s.Rect.create();t.CLIP_RADIUS=5;var g=[[1,.3,.3],[.3,1,.3],[.3,.3,1],[.3,1,1],[1,.3,1],[1,1,.3]],M=function(){function n(n){this.gl=n}return n.beanVisibleAtPosition=function(n,e,r){return a.Camera.getVisibleRect(n,v),p.xmin=e[0]-t.CLIP_RADIUS*r,p.xmax=e[0]+t.CLIP_RADIUS*r,p.ymin=e[1]-t.CLIP_RADIUS*r,p.ymax=e[1]+t.CLIP_RADIUS*r,s.Rect.intersects(v,p)},n.prototype.draw=function(t,e,s,v,p){var M=this.gl;if(n.beanVisibleAtPosition(t,e.position,e.size)){var _=a.Camera.getViewMatrix(t,f),b=a.Camera.getProjectionMatrix(t,d),x=r.mat4.mul(l,b,_);c.position[0]=e.position[0]+.1*Math.cos(3*s+e.spinOffset),c.position[1]=e.position[1]+.1*Math.sin(3*s+e.spinOffset),c.scale[0]=e.size*t.viewRadius/20,c.scale[1]=e.size*t.viewRadius/20;var R=u.Transform.toMatrix(c,m),S=r.mat4.mul(h,x,R);o.drawQuad(M,i.getShaders(M).bean,function(n){M.uniformMatrix4fv(M.getUniformLocation(n,"u_mvp"),!1,S),M.uniform1f(M.getUniformLocation(n,"u_radius"),.2),M.uniform1f(M.getUniformLocation(n,"u_time"),s),M.uniform3fv(M.getUniformLocation(n,"u_color"),g[e.colorIndex])}),e.answerIndex<0||!v.questionReady||(c.position[1]+=2.5,c.scale[0]=2*t.viewRadius/20,c.scale[1]=2*t.viewRadius/20,u.Transform.toMatrix(c,R),r.mat4.mul(S,x,R),M.blendFunc(M.SRC_ALPHA,M.ONE),o.drawQuad(M,i.getShaders(M).answer,function(n){M.activeTexture(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,v.answerTextures[e.answerIndex%v.numAnswers]),M.uniform1i(M.getUniformLocation(n,"u_tex"),0),M.uniformMatrix4fv(M.getUniformLocation(n,"u_mvp"),!1,S),M.uniform3fv(M.getUniformLocation(n,"u_color"),g[e.colorIndex]),M.uniform1f(M.getUniformLocation(n,"u_fade"),p)}),M.blendFunc(M.SRC_ALPHA,M.ONE_MINUS_SRC_ALPHA))}},n}();t.BeanRenderer=M},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(33);t.QUESTION_CANVAS_WIDTH=600,t.QUESTION_CANVAS_HEIGHT=150;var a=[document.createElement("canvas").getContext("2d"),document.createElement("canvas").getContext("2d"),document.createElement("canvas").getContext("2d"),document.createElement("canvas").getContext("2d"),document.createElement("canvas").getContext("2d")];a[0].canvas.width=t.QUESTION_CANVAS_WIDTH,a[0].canvas.height=t.QUESTION_CANVAS_HEIGHT;for(var o=1;o<a.length;++o)a[o].canvas.width=128,a[o].canvas.height=128;var i=function(n,t,e,a,o){var i=new Image;i.onload=function(){e.clearRect(0,0,e.canvas.width,e.canvas.height),r.fillImage(e,i),n.bindTexture(n.TEXTURE_2D,t),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,e.canvas),o()},i.src=a},u=function(n){var t=n.createTexture();return n.bindTexture(n.TEXTURE_2D,t),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,a[1].canvas),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),t},s=function(n,t){var e=MathGamesAPI.getInstance({wrapper:n,api_key:t,curriculum_key:"CC",debug:!0});return e.getAnswerIndex=function(){return e._session.currentQuestion.answer[0].choice-1},e},c=function(){function n(n,t,e){this.gl=e,this.api=s(n,t),this.api.on("SKILL_SELECTED",this.onSkillSelected.bind(this)),this.api.on("SKILL_CHANGED",this.onSkillSelected.bind(this)),this.api.on("SESSION_READY",this.onSessionReady.bind(this)),this.preStartRequested=!1,this.startRequested=!1,this.betweenFadeEvent=!1,this.questionTexture=u(e),this.answerTextures=[u(e),u(e),u(e),u(e)],this.numAnswers=0,this.answerIndex=-1,this._answerFade=0,this.tickState="none"}return n.prototype.start=function(){this.api.selectSkill({pool_key:"COMPLETE"})},n.prototype.startSameSkill=function(){this.loadNextQuestion(),this.preStartRequested=!0,this.startRequested=!0},Object.defineProperty(n.prototype,"questionReady",{get:function(){return this._questionReady},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"answerFade",{get:function(){return this._answerFade},enumerable:!0,configurable:!0}),n.prototype.onSkillSelected=function(){this.preStartRequested=!0,this.api.startSession()},n.prototype.showSkills=function(n){var t=this,e=function(){t.api.off("AVAILABLE_STANDARDS_CLOSED",e),n()};this.api.on("AVAILABLE_STANDARDS_CLOSED",e),this.api.showAvailableStandards()},n.prototype.consumePreStartRequest=function(){return!!this.preStartRequested&&(this.preStartRequested=!1,!0)},n.prototype.consumeStartRequest=function(){return!!this.startRequested&&(this.startRequested=!1,!0)},n.prototype.consumeBetweenFadeEvent=function(){return!!this.betweenFadeEvent&&(this.betweenFadeEvent=!1,!0)},n.prototype.onSessionReady=function(){this.loadNextQuestion(),this.startRequested=!0},n.prototype.loadNextQuestion=function(){var n=this,t=this.api.getQuestion(),e=0,r=function(){++e===n.numAnswers+1&&(n.tickState="fadingIn")};i(this.gl,this.questionTexture,a[0],t.display,r),this.numAnswers=t.choices.length;for(var o=0;o<this.numAnswers;++o)i(this.gl,this.answerTextures[o],a[o+1],t.choices[o],r);this.answerIndex=this.api.getAnswerIndex(),this._questionReady=!0},n.prototype.tick=function(){"fadingIn"===this.tickState?this._answerFade<1?this._answerFade+=.2:(this._answerFade=1,this.tickState="none"):"fadingOut"===this.tickState&&(this._answerFade>0?this._answerFade-=.2:(this._answerFade=0,this.loadNextQuestion(),this.betweenFadeEvent=!0,this.tickState="waiting"))},n.prototype.answerQuestion=function(n){"none"===this.tickState&&(this.api.answerQuestion(n),this.tickState="fadingOut")},n}();t.MGAPI=c},function(n,t,e){var r=e(35)();n.exports=r},function(n,t,e){var r=e(14),a=e(44),o=e(45),i="[object Null]",u="[object Undefined]",s=r?r.toStringTag:void 0;n.exports=function(n){return null==n?void 0===n?u:i:s&&s in Object(n)?a(n):o(n)}},function(n,t,e){var r=e(41).Symbol;n.exports=r},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(16),a=e(5),o=e(1),i=e(12),u=e(0),s=e(7),c=e(54),f=e(55),d=e(6),l=e(8);t.PLAY_AREA_RADIUS=300;var m=u.vec2.create(),h=function(n,t,e){void 0===e&&(e=!1);for(var r=e?Math.ceil(t.segments.length/2):0;r<t.segments.length;r+=3){var a=c.Bean.create();a.answerIndex=-1,a.colorIndex=t.colorIndex,u.vec2.copy(a.position,t.segments[r]),u.vec2.add(a.position,a.position,[2*Math.random()-1,2*Math.random()-1]),n.beans.push(a)}var o=s.Flash.create();s.Flash.initFromSnake(o,t),n.flashes.push(o)},v=.39-.85,p=d.Rect.fromValues(-.42-.5,-.39,.42-.5,-.48-v),g=d.Rect.fromValues(.5-.42,-.39,.42+.5,-.48-v),M=d.Rect.fromValues(-.75,-.39-v,-.3,-.48-v-v),_=d.Rect.fromValues(.3,-.39-v,.75,-.48-v-v),b=d.Rect.fromValues(-.42,-.39,.42,-.48-v),x=d.Rect.fromValues(-.42,-.85,.42,-.48),R=d.Rect.fromValues(.5,-1,1,-.6),S=!1;t.GameState={create:function(){return{inMenu:!0,playedOnce:!1,menuSubState:"default",menuCameraTime:0,menuButtonDecay:0,globalFade:1,dpad:null,camera:o.Camera.create(),hero:s.Snake.create(0),bots:i(0,2*Math.PI,2*Math.PI/80).map(function(n){return f.Bot.create(n,n<1e-9)}),beans:i(0,c.NUM_BEANS).map(function(){return c.Bean.create()}),apiFade:1,deadCountdown:0,flashes:[]}},clone:function(n){return t.GameState.copy(t.GameState.create(),n)},copy:function(n,e){return t.GameState.lerp(n,e,e,0)},lerp:function(n,t,e,r){return n.inMenu=e.inMenu,n.menuSubState=e.menuSubState,n.menuCameraTime=a.numberLerp(0,t.menuCameraTime,e.menuCameraTime,r),n.menuButtonDecay=a.numberLerp(0,t.menuButtonDecay,e.menuButtonDecay,r),n.globalFade=a.numberLerp(0,t.globalFade,e.globalFade,r),n.dpad=e.dpad,o.Camera.lerp(n.camera,t.camera,e.camera,r),s.Snake.lerp(n.hero,t.hero,e.hero,r),a.arrayLerp(n.bots,t.bots,e.bots,r,s.Snake.create,s.Snake.lerp),a.arrayOfIDableLerp(n.beans,t.beans,e.beans,r,!0,c.Bean.create,c.Bean.lerp),n.apiFade=a.numberLerp(0,t.apiFade,e.apiFade,r),n.flashes=a.arrayLerp(n.flashes,t.flashes,e.flashes,r,s.Flash.create,s.Flash.lerp),n.deadCountdown=e.deadCountdown,n.playedOnce=e.playedOnce,n},step:function(n,e,a,o,i){if(t.GameState.copy(n,e),n.camera.aspectRatio=a,R.xmin=.5,R.xmax=1,R.ymin=-1,R.ymax=-.6,a<.75?(R.xmin=-.25,R.xmax=.25,R.ymin=22/15*R.ymin,R.ymax=22/15*R.ymax):a<1&&(R.ymin/=a,R.ymax/=a),n.inMenu){if(n.menuCameraTime+=.005,n.camera.pos[0]=20*Math.cos(n.menuCameraTime),n.camera.pos[1]=20*Math.sin(n.menuCameraTime),n.menuButtonDecay*=.6,"fadingOut"===n.menuSubState)n.globalFade>0?(n.globalFade-=.1,n.globalFade<0&&(n.globalFade=0)):i.consumeStartRequest()&&(s.Snake.initialize(n.hero),n.menuSubState="default",n.inMenu=!1);else if("default"===n.menuSubState){n.globalFade<1&&(n.globalFade+=.1,n.globalFade>1&&(n.globalFade=1)),r.setCursor("default");var v=n.playedOnce?p:b;n.playedOnce&&d.Rect.containsPoint(g,o.mousePos)?(r.setCursor("pointer"),o.mouseDown&&(r.setCursor("default"),n.menuSubState="pressedRestart",n.menuButtonDecay=1,i.startSameSkill())):d.Rect.containsPoint(M,o.mousePos)?(r.setCursor("pointer"),o.mouseDown&&(r.setCursor("default"),n.menuSubState="pressedSkinLeft",n.menuButtonDecay=1,n.hero.colorIndex++,n.hero.colorIndex%=6,setTimeout(function(){return S=!0},200))):d.Rect.containsPoint(_,o.mousePos)?(r.setCursor("pointer"),o.mouseDown&&(r.setCursor("default"),n.menuSubState="pressedSkinRight",n.menuButtonDecay=1,n.hero.colorIndex+=5,n.hero.colorIndex%=6,setTimeout(function(){return S=!0},200))):d.Rect.containsPoint(v,o.mousePos)?(r.setCursor("pointer"),o.mouseDown&&(r.setCursor("default"),n.menuSubState="pressedStart",n.menuButtonDecay=1,i.start())):d.Rect.containsPoint(x,o.mousePos)?(r.setCursor("pointer"),o.mouseDown&&(r.setCursor("default"),n.menuSubState="pressedSkills",n.menuButtonDecay=1,i.showSkills(function(){return S=!0}))):d.Rect.containsPoint(R,o.mousePos)&&(r.setCursor("pointer"),o.mouseDown&&(r.setCursor("default"),window.location.href="https://www.mathgames.com/"))}else S?(S=!1,n.menuSubState="default"):"pressedStart"!==n.menuSubState&&"pressedRestart"!==n.menuSubState||i.consumePreStartRequest()&&(n.menuSubState="fadingOut");return n}if(n.hero.segments.length<1){if(n.deadCountdown<1)n.deadCountdown+=.05;else if(n.globalFade>0&&(n.globalFade-=.1,n.globalFade<=0))return t.GameState.copy(n,t.GameState.create()),n.playedOnce=!0,n.globalFade=0,n}else n.globalFade<1&&(n.globalFade+=.1,n.globalFade>1&&(n.globalFade=1));o.dpadPos[0]>-90?n.dpad=o.dpadPos:n.dpad=null,function(n,e,r,a){m[0]=r.mousePos[0]*n.camera.viewRadius+n.camera.pos[0],m[1]=r.mousePos[1]*n.camera.viewRadius+n.camera.pos[1];for(var o=0;o<n.flashes.length;++o)n.flashes[o].age+=.05;(n.flashes=n.flashes.filter(function(n){return n.age<1}),n.hero.segments.length>0&&"spawnBean"===s.Snake.updateInPlace(n.hero,m,r.mouseDown))&&((p=c.Bean.create()).colorIndex=n.hero.colorIndex,p.answerIndex=-1,p.size=1,u.vec2.copy(p.position,n.hero.segments[n.hero.segments.length-1]),n.beans.push(p));n.hero.segments.length>0&&u.vec2.copy(n.camera.pos,n.hero.segments[0]);for(o=0;o<n.bots.length;++o)l.SnakeRenderer.visible(n.bots[o],n.camera)&&(f.Bot.move(n.bots[o],n,a),u.vec2.sqrLen(n.bots[o].segments[0])>t.PLAY_AREA_RADIUS*t.PLAY_AREA_RADIUS&&(h(n,n.bots[o]),f.Bot.respawn(n.bots[o],n.hero.segments[0])));if(0!==n.hero.segments.length){for(o=0;o<n.bots.length;++o)if(l.SnakeRenderer.visible(n.bots[o],n.camera)){if(s.Snake.deadAgainst(n.hero,n.bots[o]))return h(n,n.hero),void(n.hero.segments=[]);s.Snake.deadAgainst(n.bots[o],n.hero)&&(h(n,n.bots[o]),f.Bot.respawn(n.bots[o],n.hero.segments[0]))}for(o=0;o<n.bots.length-1;++o)if(l.SnakeRenderer.visible(n.bots[o],n.camera))for(var i=o+1;i<n.bots.length;++i)l.SnakeRenderer.visible(n.bots[i],n.camera)&&(s.Snake.deadAgainst(n.bots[o],n.bots[i])?(h(n,n.bots[o]),f.Bot.respawn(n.bots[o],n.hero.segments[0])):s.Snake.deadAgainst(n.bots[i],n.bots[o])&&(h(n,n.bots[i]),f.Bot.respawn(n.bots[i],n.hero.segments[0])));if(u.vec2.sqrLen(n.hero.segments[0])>t.PLAY_AREA_RADIUS*t.PLAY_AREA_RADIUS)return h(n,n.hero),void(n.hero.segments=[]);var d=[],v=function(t){var e=s.Flash.create();s.Flash.initFromSnake(e,t),e.age=.25,n.flashes.push(e),h(n,t,!0)};for(o=0;o<n.beans.length;++o){if(!c.Bean.updateInPlace(n.beans[o],n.hero,n.camera,a,!0,v))return h(n,n.hero),void(n.hero.segments=[]);for(i=0;i<n.bots.length;++i)l.SnakeRenderer.visible(n.bots[i],n.camera)&&n.bots[i].alive&&(c.Bean.updateInPlace(n.beans[o],n.bots[i],n.camera,a,!1,v)||(h(n,n.bots[i]),f.Bot.respawn(n.bots[i],n.hero.segments[0])));n.beans[o].collected&&d.push(n.beans[o])}n.beans=n.beans.filter(function(n){return d.indexOf(n)<0});for(o=0;o<d.length;++o)if(d[o].answerIndex>=0){var p=c.Bean.createNewAnswer(d[o].answerIndex,n.camera,n.beans);n.beans.push(p)}for(;n.beans.length<c.NUM_BEANS;){(p=c.Bean.create()).answerIndex=-1,n.beans.push(p)}}}(n,0,o,i);var y=20+20*(Math.min(n.hero.scale,3)-1)*.5;return n.camera.viewRadius+=(y-n.camera.viewRadius)/20,n.apiFade=i.answerFade,n}}},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=e(0),o=e(53),i=a.vec2.create(),u=a.vec2.create(),s=function(n,t,e){var r=0,a=0;if("touchstart"==n.type||"touchmove"==n.type||"touchend"==n.type||"touchcancel"==n.type){if(n.touches.length){for(var o=0;o<n.touches.length;++o)if(n.touches[o].identifier===t){r=(i=n.touches[o]).pageX,a=i.pageY;break}}else if(n.changedTouches.length)for(o=0;o<n.changedTouches.length;++o)if(n.changedTouches[o].identifier===t){var i;r=(i=n.changedTouches[o]).pageX,a=i.pageY;break}}else"mousedown"!=n.type&&"mouseup"!=n.type&&"mousemove"!=n.type&&"mouseover"!=n.type&&"mouseout"!=n.type&&"mouseenter"!=n.type&&"mouseleave"!=n.type||(r=n.clientX,a=n.clientY);e[0]=2*(r/window.innerWidth-.5),e[1]=-2*(a/window.innerHeight-.5);var u=window.innerWidth/window.innerHeight;u>1?e[0]*=u:e[1]/=u};t.setCursor=function(n){r.style.cursor=n};var c=function(){function n(n){this.eventBinder=new o.EventBinder(this),this.state={mousePos:a.vec2.fromValues(-100,0),mouseDown:!1,dpadPos:a.vec2.fromValues(-100,0)},this.fingerCount=0,this.mainFingerId=0,this.menuMode=!0,this.fingerBoost=!1,this.distanceBoost=!1,r=n,n.addEventListener("mousemove",this.onMouseMove.bind(this)),n.addEventListener("mousedown",this.onMouseDown.bind(this)),n.addEventListener("mouseup",this.onMouseUp.bind(this)),n.addEventListener("touchstart",this.onFingerDown.bind(this)),n.addEventListener("touchmove",this.onFingerMove.bind(this)),n.addEventListener("touchend",this.onFingerUp.bind(this)),n.addEventListener("touchcancel",this.onFingerUp.bind(this))}return n.prototype.getCurrentState=function(){return this.state},n.prototype.onFingerUp=function(n){n.preventDefault(),this.fingerCount--,1===this.fingerCount?(this.fingerBoost=!1,this.state.mouseDown=this.distanceBoost):0===this.fingerCount&&(this.state.mouseDown=!1,a.vec2.set(this.state.dpadPos,-100,0))},n.prototype.onFingerDown=function(n){if(n.preventDefault(),this.fingerCount++,2===this.fingerCount)this.fingerBoost=!0,this.state.mouseDown=!0;else if(1===this.fingerCount){if(this.mainFingerId=n.changedTouches[0].identifier,this.menuMode)return s(n,this.mainFingerId,this.state.mousePos),void(this.state.mouseDown=!0);s(n,this.mainFingerId,this.state.dpadPos)}},n.prototype.onFingerMove=function(n){if(n.preventDefault(),this.menuMode)s(n,this.mainFingerId,this.state.mousePos);else{s(n,this.mainFingerId,i);var t=a.vec2.sub(u,i,this.state.dpadPos),e=a.vec2.squaredLength(t);e>=1e-4&&(a.vec2.normalize(t,t),a.vec2.copy(this.state.mousePos,t),this.distanceBoost=e>=.36),this.state.mouseDown=this.fingerBoost||this.distanceBoost}},n.prototype.onMouseDown=function(n){n.preventDefault(),s(n,0,this.state.mousePos),this.state.mouseDown=!0},n.prototype.onMouseUp=function(n){n.preventDefault(),this.state.mouseDown=!1},n.prototype.onMouseMove=function(n){n.preventDefault(),s(n,0,this.state.mousePos)},n.prototype.release=function(){this.eventBinder.unbindAll()},n}();t.InputGrabber=c},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(18),a=e(15),o=e(16),i=e(11),u=e(56),s=document.getElementById("game-canvas-container"),c=document.getElementById("game-canvas"),f=c.getContext("webgl",{alpha:!1});f.getExtension("OES_standard_derivatives");var d=(new Date).getTime()/1e3,l=new o.InputGrabber(c),m=a.GameState.create(),h=a.GameState.create(),v=a.GameState.create(),p=new r.GameRenderer(f),g=new i.MGAPI(s,"54bda60564617400ae010000",f),M=d,_=0;new Promise(function(n,t){Promise.all([u.loadTexture(f,"res/title.png","linear","clamp"),u.loadTexture(f,"res/play.png","linear","clamp"),u.loadTexture(f,"res/skills.png","linear","clamp"),u.loadTexture(f,"res/change.png","linear","clamp"),u.loadTexture(f,"res/more.png","linear","clamp"),u.loadTexture(f,"res/dpad.png","linear","clamp"),u.loadTexture(f,"res/arrow.png","linear","clamp")]).then(function(t){var e=t[0],r=t[1],a=t[2],o=t[3],i=t[4],u=t[5],s=t[6];n({title:e,play:r,skills:a,change:o,more:i,dpad:u,arrow:s})})}).then(function(n){var t=function(){var e=(new Date).getTime()/1e3,r=e-M;for(M=e,r>5&&(r=5),l.menuMode=h.inMenu,_+=r;_>=1/30;)g.tick(),_-=1/30,a.GameState.copy(m,h),a.GameState.step(h,h,c.width/c.height,l.getCurrentState(),g);g.consumeBetweenFadeEvent()&&function(n){for(var t=0;t<n.length;++t)!n[t].collected&&n[t].answerIndex>=0&&(n[t].answerIndex=Math.floor(4*Math.random()))}(h.beans),a.GameState.lerp(v,m,h,_/(1/30)),p.draw(v,e-d,g,n),requestAnimationFrame(t)},e=function(){c.width=window.innerWidth,c.height=window.innerHeight,p.notifyCanvasResize(f.canvas.width,f.canvas.height)};window.addEventListener("resize",e),e(),t()})},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(8),a=e(10),o=e(31),i=e(32),u=e(34),s=e(2),c=e(3),f=e(52),d=function(){function n(n){this.gl=n,this.snakeRenderer=new r.SnakeRenderer(n),this.beanRenderer=new a.BeanRenderer(n),this.questionRenderer=new i.QuestionRenderer(n),this.menuRenderer=new u.MenuRenderer(n),this.dpadRenderer=new f.DPadRenderer(n),n.enable(n.BLEND),n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA),n.disable(n.DEPTH_TEST)}return n.prototype.notifyCanvasResize=function(n,t){this.gl.viewport(0,0,n,t)},n.prototype.draw=function(n,t,e,r){var a=this.gl;if(a.clearColor(0,0,0,1),a.clear(a.COLOR_BUFFER_BIT),o.drawBackground(a,n.camera),n.inMenu)this.menuRenderer.draw(n.camera,r,n);else{for(var i=0;i<n.bots.length;++i)n.bots[i].alive&&this.snakeRenderer.drawShadowPass(n.camera,n.bots[i],t);n.hero.alive&&this.snakeRenderer.drawShadowPass(n.camera,n.hero,t);for(i=0;i<n.beans.length;++i){var u=n.beans[i];u.collected||this.beanRenderer.draw(n.camera,u,t,e,n.apiFade)}for(i=0;i<n.bots.length;++i)n.bots[i].alive&&this.snakeRenderer.drawSnakePass(n.camera,n.bots[i],t);n.hero.alive&&this.snakeRenderer.drawSnakePass(n.camera,n.hero,t);for(i=0;i<n.flashes.length;++i)this.snakeRenderer.drawFlash(n.camera,n.flashes[i]);this.questionRenderer.draw(n.camera,e,n.apiFade),n.dpad&&this.dpadRenderer.draw(n.dpad,n.camera,r)}n.globalFade<.999&&s.drawQuad(a,c.getShaders(a).globalFade,function(t){a.uniform1f(a.getUniformLocation(t,"u_fade"),n.globalFade)})},n}();t.GameRenderer=d},function(n,t,e){"use strict";e.r(t),t.default="precision highp float;\r\n\r\nuniform sampler2D u_tex;\r\nuniform mat4 u_mvp;\r\nuniform vec3 u_color;\r\nuniform float u_fade;\r\n\r\nvarying vec2 v_uv;\r\n\r\n#ifdef VERTEX\r\n\r\n    attribute vec2 a_position;\r\n\r\n    void main()\r\n    {\r\n        gl_Position = u_mvp * vec4(a_position, -1, 1);\r\n        v_uv = a_position*.5 + .5;\r\n        v_uv.y = 1. - v_uv.y;\r\n    }\r\n\r\n#endif\r\n#ifdef FRAGMENT\r\n\r\n    void main()\r\n    {\r\n        float draw = texture2D(u_tex, v_uv).a;\r\n        gl_FragColor = vec4(u_color, .7*draw*u_fade);\r\n    }\r\n\r\n#endif\r\n"},function(n,t,e){"use strict";e.r(t),t.default="precision highp float;\r\n\r\nuniform float u_time;\r\nuniform vec2 u_offset;\r\nuniform vec2 u_viewSize;\r\n\r\nvarying vec2 v_uv;\r\n\r\n#ifdef VERTEX\r\n\r\n    attribute vec2 a_position;\r\n\r\n    void main()\r\n    {\r\n        gl_Position = vec4(a_position, 0, 1);\r\n        v_uv = a_position.xy;\r\n    }\r\n\r\n#endif\r\n#ifdef FRAGMENT\r\n\r\n#define MASTER_SCALE 4.0\r\n#define PLAY_AREA_RADIUS (300.0 / MASTER_SCALE)\r\n#define VISIBLE_BORDER_RADIUS (0.75 / MASTER_SCALE)\r\n#define OUTSIDE_AA 0.01\r\n\r\n#define BASE_LAYER_COLOR (vec3(16,25,38) / 255.)\r\n#define TOP_LAYER_COLOR  (0.2*vec3(28,42,59) / 255.)\r\n\r\n    float random(vec2 co)\r\n    {\r\n        return fract(sin(dot(co,vec2(12.9898,78.233))) * 43758.5453);\r\n    }\r\n\r\n\r\n    // ===== Grain ============================\r\n\r\n\r\n    float noise(vec2 p){\r\n        vec2 ip = floor(p);\r\n        vec2 u = fract(p);\r\n        u = u*u*(3.0-2.0*u);\r\n        \r\n        float res = mix(\r\n            mix(random(ip),random(ip+vec2(1.0,0.0)),u.x),\r\n            mix(random(ip+vec2(0.0,1.0)),random(ip+vec2(1.0,1.0)),u.x),u.y);\r\n        return res*res;\r\n    }\r\n\r\n    float getGrainAmount(vec2 uv)\r\n    {\r\n        return noise(uv*5000.0);\r\n    }\r\n\r\n\r\n    // ===== Hexagon ============================\r\n\r\n\r\n    const vec2 s = vec2(1, 1.7320508); // 1.7320508 = sqrt(3)\r\n    const float borderThickness = .02;\r\n\r\n    float calcHexDistance(vec2 p)\r\n    {\r\n        p = abs(p);\r\n        return max(dot(p, s * .5), p.x);\r\n    }\r\n\r\n    float round1(float f)\r\n    {\r\n        return fract(f) >= 0.5 ? ceil(f) : floor(f);\r\n    }\r\n\r\n    vec4 round4(vec4 v)\r\n    {\r\n        return vec4(round1(v.x), round1(v.y), round1(v.z), round1(v.w));\r\n    }\r\n\r\n    vec4 calcHexInfo(vec2 uv)\r\n    {\r\n        vec4 hexCenter = round4(vec4(uv, uv - vec2(.5, 1.)) / s.xyxy);\r\n        vec4 offset = vec4(uv - hexCenter.xy * s, uv - (hexCenter.zw + .5) * s);\r\n        return dot(offset.xy, offset.xy) < dot(offset.zw, offset.zw) ? vec4(offset.xy, hexCenter.xy) : vec4(offset.zw, hexCenter.zw);\r\n    }\r\n\r\n    float getHexDistanceField(vec2 uv)\r\n    {\r\n        vec4 hexInfo = calcHexInfo(uv);\r\n        float totalDist = clamp((calcHexDistance(hexInfo.xy) + borderThickness) / 0.52, 0.0, 1.0);\r\n        return totalDist;\r\n    }\r\n\r\n    vec2 getHexCoordinates(vec2 uv)\r\n    {\r\n        vec4 hexInfo = calcHexInfo(uv);\r\n        return hexInfo.xy;\r\n    }\r\n\r\n    vec2 getHexIndex(vec2 uv)\r\n    {\r\n        vec4 hexInfo = calcHexInfo(uv);\r\n        return hexInfo.zw;\r\n    }\r\n\r\n\r\n    // ===== Main ==============================\r\n\r\n    float getPointSeven(vec2 uv)\r\n    {\r\n        vec2 index = getHexIndex(uv);\r\n        return 0.75+0.05*sin(2.*u_time + .5*(index.x-index.y));\r\n    }\r\n\r\n\r\n    vec3 getBaseLayer(vec2 uv)\r\n    {\r\n        return BASE_LAYER_COLOR + (0.05*getGrainAmount(uv)-0.05);\r\n    }\r\n\r\n    vec3 getShadowLayer(vec2 uv)\r\n    {\r\n        uv.x += 0.02;\r\n        uv.y += 0.07;\r\n        float dist = getHexDistanceField(uv) - getPointSeven(uv);\r\n        dist = clamp(dist, -0.1, 0.1);\r\n        \r\n        return vec3(-0.25*(0.1-dist));\r\n    }\r\n\r\n    vec3 getTopHexagonLayer(vec2 uv)\r\n    {\r\n        if (getHexDistanceField(uv) > getPointSeven(uv)) \r\n            return getShadowLayer(uv);\r\n        \r\n        float th = 0.35;\r\n        \r\n        vec2 hexCoords = mat2(cos(th), sin(th), -sin(th), cos(th)) \r\n            * getHexCoordinates(uv);\r\n        \r\n        return TOP_LAYER_COLOR + mix(-0.15, 0.15, 0.5*(hexCoords.y+1.0));\r\n    }\r\n\r\n    float getBorderAmount(vec2 uv)\r\n    {\r\n        float dist = getHexDistanceField(uv);\r\n        return clamp(20.0*abs(dist - getPointSeven(uv)), 0.0, 1.0);\r\n    }\r\n\r\n    void main()\r\n    {\r\n        float th = -0.15;\r\n        vec2 uv = (v_uv * u_viewSize + u_offset) / MASTER_SCALE;\r\n\r\n        float luv = length(uv);\r\n        if (luv > PLAY_AREA_RADIUS+VISIBLE_BORDER_RADIUS) {\r\n            float t = smoothstep(\r\n                PLAY_AREA_RADIUS+VISIBLE_BORDER_RADIUS,\r\n                PLAY_AREA_RADIUS+VISIBLE_BORDER_RADIUS+OUTSIDE_AA,\r\n                luv\r\n            );\r\n            gl_FragColor = mix(vec4(.5,0,0,1), vec4(.2,0,0,1), t);\r\n            return;\r\n        } else if (luv > PLAY_AREA_RADIUS+OUTSIDE_AA) {\r\n            gl_FragColor = vec4(.5,0,0,1);\r\n            return;\r\n        }\r\n\r\n        uv = mat2(cos(th), sin(th), -sin(th), cos(th)) * uv;\r\n            \r\n        vec3 baseLayer = getBaseLayer(uv);\r\n        vec3 topHexagonLayer = getTopHexagonLayer(uv);\r\n        float borderAmount = getBorderAmount(uv);\r\n\r\n        \r\n        vec3 color = borderAmount * (baseLayer + topHexagonLayer);\r\n\r\n        float t_ring = smoothstep(\r\n            PLAY_AREA_RADIUS,\r\n            PLAY_AREA_RADIUS+OUTSIDE_AA,\r\n            luv\r\n        );\r\n\r\n        gl_FragColor = mix(vec4(color,1.0), vec4(.5,0,0,1), t_ring);\r\n    }\r\n\r\n#endif\r\n"},function(n,t,e){"use strict";e.r(t),t.default="precision highp float;\r\n\r\nuniform mat4 u_mvp;\r\nuniform float u_radius;\r\nuniform float u_time;\r\nuniform float u_index;\r\nuniform vec3 u_color;\r\n\r\nvarying vec2 v_uv;\r\n\r\n#define TOTAL_SIZE     6.0\r\n#define BRIGHTNESS     0.8\r\n#define RADIUS_AA_SIZE 0.05\r\n#define RADIUS         1.0\r\n#define TIME_MULT      6.0\r\n\r\n#define TOTAL_SIZE_ANIM  (TOTAL_SIZE * (.95 + .05*sin(TIME_MULT*u_time)))\r\n#define BRIGHTNESS_ANIM  (BRIGHTNESS * (.50 + .50*sin(TIME_MULT*u_time)))\r\n#define RADIUS_ANIM      (RADIUS     * (.85 + .15*sin(TIME_MULT*u_time)))\r\n\r\n#ifdef VERTEX\r\n\r\n    attribute vec2 a_position;\r\n\r\n    void main()\r\n    {\r\n        gl_Position = u_mvp * vec4(TOTAL_SIZE_ANIM * a_position * u_radius, -1, 1);\r\n        v_uv = TOTAL_SIZE_ANIM * a_position;\r\n    }\r\n\r\n#endif\r\n#ifdef FRAGMENT\r\n\r\n    void main()\r\n    {\r\n        vec3 BASE_COLOR = u_color;\r\n        vec3 MIXED_WHITE_COLOR = mix(u_color, vec3(1,1,1), .5);\r\n\r\n        vec4 INNER_COLOR_A = vec4(MIXED_WHITE_COLOR, 1.0); vec4(1.0, 0.5, 0.5, 1.0);\r\n        vec4 INNER_COLOR_B = vec4(0.8 * MIXED_WHITE_COLOR, 1.0);\r\n        vec4 OUTER_COLOR_A = vec4(BASE_COLOR, 0.3);\r\n        vec4 OUTER_COLOR_B = vec4(BASE_COLOR, 0.0);\r\n\r\n        float ra = RADIUS_ANIM;\r\n        float r0 = ra - RADIUS_AA_SIZE;\r\n        float r1 = ra + RADIUS_AA_SIZE;\r\n        float r = clamp(length(v_uv), 0., TOTAL_SIZE_ANIM);\r\n\r\n        if (r < r0) {\r\n            vec4 innerColorA = mix(INNER_COLOR_A, vec4(1,1,1,1), BRIGHTNESS_ANIM);\r\n            gl_FragColor = mix(innerColorA, INNER_COLOR_B, r / r0);\r\n        } else if (r < r1) {\r\n            gl_FragColor = mix(INNER_COLOR_B, OUTER_COLOR_A, (r - r0) / (2. * RADIUS_AA_SIZE));\r\n        } else {\r\n            gl_FragColor = mix(OUTER_COLOR_A, OUTER_COLOR_B, (r - r1) / (TOTAL_SIZE_ANIM - 1.0));\r\n        }\r\n    }\r\n\r\n#endif\r\n"},function(n,t,e){"use strict";e.r(t),t.default="precision highp float;\r\n\r\nuniform sampler2D u_tex;\r\nuniform mat4 u_mvp;\r\n\r\nvarying vec2 v_uv;\r\n\r\n#ifdef VERTEX\r\n\r\n    attribute vec2 a_position;\r\n\r\n    void main()\r\n    {\r\n        gl_Position = u_mvp * vec4(a_position, 0, 1);\r\n        v_uv = a_position*.5 + .5;\r\n        v_uv.y = 1. - v_uv.y;\r\n    }\r\n\r\n#endif\r\n#ifdef FRAGMENT\r\n\r\n    void main()\r\n    {\r\n        gl_FragColor = texture2D(u_tex, v_uv);\r\n    }\r\n\r\n#endif\r\n"},function(n,t,e){"use strict";e.r(t),t.default="precision highp float;\r\n\r\nuniform float u_fade;\r\n\r\nvarying vec2 v_uv;\r\n\r\n#ifdef VERTEX\r\n\r\n    attribute vec2 a_position;\r\n\r\n    void main()\r\n    {\r\n        gl_Position = vec4(a_position, 0, 1);\r\n        v_uv = a_position.xy;\r\n    }\r\n\r\n#endif\r\n#ifdef FRAGMENT\r\n\r\n    void main()\r\n    {\r\n        gl_FragColor = vec4(0,0,0,1.-u_fade);\r\n    }\r\n\r\n#endif\r\n"},function(n,t,e){"use strict";e.r(t),t.default="precision highp float;\r\n\r\nuniform sampler2D u_tex;\r\nuniform mat4 u_mvp;\r\nuniform vec3 u_color;\r\nuniform vec2 u_dimensions;\r\nuniform float u_fade;\r\nuniform float u_scale;\r\nuniform float u_flip;\r\nuniform float u_vertOffset;\r\n\r\nvarying vec2 v_uv;\r\n\r\n#ifdef VERTEX\r\n\r\n    attribute vec2 a_position;\r\n\r\n    void main()\r\n    {\r\n        vec2 position = a_position * u_dimensions * .02 * u_scale;\r\n        position.y += u_vertOffset;\r\n\r\n        gl_Position = u_mvp * vec4(position, -1, 1);\r\n        v_uv = a_position*.5 + .5;\r\n        v_uv.y = 1. - v_uv.y;\r\n\r\n        if (u_flip < .0) v_uv.x = 1. - v_uv.x;\r\n    }\r\n\r\n#endif\r\n#ifdef FRAGMENT\r\n\r\n    void main()\r\n    {\r\n\r\n        gl_FragColor = texture2D(u_tex, v_uv);\r\n    }\r\n\r\n#endif\r\n"},function(n,t,e){"use strict";e.r(t),t.default="precision highp float;\r\n\r\nuniform sampler2D u_tex;\r\nuniform mat4 u_mvp;\r\nuniform vec3 u_color;\r\nuniform vec2 u_dimensions;\r\nuniform float u_fade;\r\n\r\nvarying vec2 v_uv;\r\n\r\n#ifdef VERTEX\r\n\r\n    attribute vec2 a_position;\r\n\r\n    void main()\r\n    {\r\n        vec2 position = a_position * u_dimensions * .03;\r\n\r\n        gl_Position = u_mvp * vec4(position, -1, 1);\r\n        v_uv = a_position*.5 + .5;\r\n        v_uv.y = 1. - v_uv.y;\r\n    }\r\n\r\n#endif\r\n#ifdef FRAGMENT\r\n\r\n    void main()\r\n    {\r\n        float draw = texture2D(u_tex, v_uv).a;\r\n        gl_FragColor = vec4(u_color, .7*draw*u_fade);\r\n    }\r\n\r\n#endif\r\n"},function(n,t,e){"use strict";e.r(t),t.default="precision highp float;\r\n\r\nuniform mat4 u_mvp;\r\nuniform float u_theta;\r\nuniform float u_depth;\r\nuniform vec3 u_color;\r\nuniform float u_time;\r\nuniform float u_speeding;\r\n\r\nvarying vec2 v_uv;\r\n\r\n#ifdef VERTEX\r\n\r\n    attribute vec2 a_position;\r\n\r\n    void main()\r\n    {\r\n        gl_Position = u_mvp * vec4(a_position, -1, 1);\r\n        v_uv = a_position.xy;\r\n    }\r\n\r\n#endif\r\n#ifdef FRAGMENT\r\n\r\n    #define AA (0.05)\r\n    #define SPEED_WAVE (.5+.5*sin(.3*u_depth-28.*u_time))\r\n    #define INNER_COLOR (u_color)\r\n    #define OUTER_COLOR (u_color / 2.6)\r\n\r\n    mat2 rotate2(float angle)\r\n    {\r\n        float c = cos(angle);\r\n        float s = sin(angle);\r\n        return mat2(c, s, -s, c);\r\n    }\r\n\r\n    vec4 mainColor(vec2 uv)\r\n    {\r\n        float r = length(uv);\r\n        float antialias = AA;\r\n        float alpha = 1.0 - smoothstep(0.5 - antialias, 0.5 + antialias, r-0.25);\r\n\r\n        float colorLookup = clamp(.75*r + .5*abs(uv.y), 0., 1.);\r\n        vec3 col = vec3(mix(INNER_COLOR, OUTER_COLOR, colorLookup));\r\n\r\n        return vec4(col, alpha);\r\n    }\r\n\r\n    void main()\r\n    {\r\n        vec2 pos = rotate2(-u_theta) * v_uv;\r\n        \r\n        vec4 color = mainColor(pos);\r\n\r\n        float darknessMul = 0.85 + 0.15*cos(u_depth);\r\n        gl_FragColor = vec4(color.rgb * darknessMul, color.a);\r\n\r\n        if (u_speeding > .5) {\r\n            gl_FragColor.xyz += u_color * SPEED_WAVE;\r\n        }\r\n    }\r\n\r\n#endif\r\n"},function(n,t,e){"use strict";e.r(t),t.default="precision highp float;\r\n\r\nuniform mat4 u_mvp;\r\nuniform float u_age;\r\nuniform float u_depth;\r\nuniform vec3 u_color;\r\n\r\nvarying vec2 v_uv;\r\n\r\n#ifdef VERTEX\r\n\r\n    attribute vec2 a_position;\r\n\r\n    void main()\r\n    {\r\n        gl_Position = u_mvp * vec4(a_position, -1, 1);\r\n        v_uv = a_position.xy;\r\n    }\r\n\r\n#endif\r\n#ifdef FRAGMENT\r\n\r\n    #define SPEED_WAVE (.5+.5*sin(.3*u_depth-28.*u_age))\r\n\r\n    void main()\r\n    {\r\n        float r = length(v_uv);\r\n        float nalpha = smoothstep(0.7, 0.95, r);\r\n        float alive = clamp(1.0 - u_age - 0.1*sin(-20.*u_age + u_depth), 0., 1.);\r\n\r\n        vec3 col = clamp(2. * u_color * alive, 0., 1.);\r\n\r\n        gl_FragColor = vec4(\r\n            col,\r\n            (1.0 - nalpha) * alive * alive\r\n        );\r\n    }\r\n\r\n#endif\r\n"},function(n,t,e){"use strict";e.r(t),t.default="precision highp float;\r\n\r\nuniform mat4 u_mvp;\r\nuniform float u_theta;\r\nuniform float u_depth;\r\nuniform vec3 u_color;\r\nuniform float u_time;\r\nuniform float u_speeding;\r\n#define u_eyeTheta u_theta\r\n\r\nvarying vec2 v_uv;\r\n\r\n#ifdef VERTEX\r\n\r\n    attribute vec2 a_position;\r\n\r\n    void main()\r\n    {\r\n        gl_Position = u_mvp * vec4(a_position, -1, 1);\r\n        v_uv = a_position.xy;\r\n    }\r\n\r\n#endif\r\n#ifdef FRAGMENT\r\n\r\n    #define AA (0.05)\r\n\r\n    #define SPEED_WAVE (.5+.5*sin(.3*u_depth-28.*u_time))\r\n\r\n    #define INNER_COLOR (u_color)\r\n    #define OUTER_COLOR (u_color / 2.6)\r\n\r\n    #define EYE_DISTACE   0.33\r\n    #define EYE_RADIUS    0.61\r\n    #define PUPIL_RADIUS  0.35\r\n    #define PUPIL_OFFSET  0.13\r\n    #define CROSS_EYES    0.2\r\n\r\n\r\n\r\n    mat2 rotate2(float angle)\r\n    {\r\n        return mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\r\n    }\r\n\r\n    vec4 pupilColor(vec2 uv, float angle)\r\n    {\r\n        if (uv.y > 0.) {\r\n            angle *= -1.;\r\n            angle -= CROSS_EYES;\r\n        } else {\r\n            angle -= CROSS_EYES;\r\n        }\r\n        uv.y = abs(uv.y);\r\n        vec2 uv1 = uv - EYE_DISTACE - rotate2(angle)*vec2(PUPIL_OFFSET,0);\r\n        float r = length(uv1) / PUPIL_RADIUS;\r\n        \r\n        r = clamp(r, 0.,.6);\r\n\r\n        float antialias = AA;\r\n        float alpha = 1.0 - smoothstep(0.5 - antialias, 0.5 + antialias, r);\r\n        \r\n        return vec4(0,0,0,alpha);\r\n    }\r\n\r\n    vec4 eyeColor(vec2 uv)\r\n    {\r\n        uv.y = abs(uv.y);\r\n        float r = length(uv - EYE_DISTACE) / EYE_RADIUS;\r\n\r\n        float antialias = AA;\r\n        float alpha = 1.0 - smoothstep(0.5 - antialias, 0.5 + antialias, r);\r\n\r\n        vec3 baseColor = mix(INNER_COLOR, vec3(1), 0.6);\r\n        (.5+.5*sin(.5*u_depth-30.*u_time));\r\n        return vec4(baseColor, alpha);\r\n    }\r\n\r\n    vec4 mainColor(vec2 uv)\r\n    {\r\n        float r = length(uv);\r\n        float antialias = AA;\r\n        float alpha = 1.0 - smoothstep(0.5 - antialias, 0.5 + antialias, r-0.25);\r\n\r\n        float colorLookup = clamp(.75*r + .5*abs(uv.y), 0., 1.);\r\n        vec3 col = vec3(mix(INNER_COLOR, OUTER_COLOR, colorLookup));\r\n\r\n        return vec4(col, alpha);\r\n    }\r\n\r\n    void main()\r\n    {\r\n        vec2 pos = rotate2(-u_theta) * v_uv;\r\n        \r\n        vec4 color = mainColor(pos);\r\n\r\n        float darknessMul = 0.85 + 0.15*cos(u_depth);\r\n\r\n        vec3 fragColor = color.rgb * darknessMul;\r\n\r\n        vec4 eyeColor = eyeColor(pos);\r\n        fragColor = mix(fragColor, eyeColor.rgb, eyeColor.a);\r\n        \r\n        vec4 pupilColor = pupilColor(pos, u_theta - u_eyeTheta);\r\n        fragColor = mix(fragColor, pupilColor.rgb, pupilColor.a);\r\n\r\n        gl_FragColor = vec4(fragColor, max(color.a, max(eyeColor.a, pupilColor.a)));\r\n\r\n        if (u_speeding > .5) {\r\n            gl_FragColor.xyz += u_color * SPEED_WAVE;\r\n        }\r\n    }\r\n\r\n#endif\r\n"},function(n,t,e){"use strict";e.r(t),t.default="precision highp float;\r\n\r\nuniform mat4 u_mvp;\r\nuniform float u_theta;\r\n\r\nuniform float u_time;\r\nuniform float u_depth;\r\nuniform float u_speeding;\r\nuniform vec3 u_speedColor;\r\n\r\nvarying vec2 v_uv;\r\n\r\n#ifdef VERTEX\r\n\r\n    attribute vec2 a_position;\r\n\r\n    void main()\r\n    {\r\n        gl_Position = u_mvp * vec4(a_position, -1, 1);\r\n        v_uv = a_position.xy;\r\n    }\r\n\r\n#endif\r\n#ifdef FRAGMENT\r\n\r\n    #define SPEED_WAVE (.5+.5*sin(.3*u_depth-28.*u_time))\r\n\r\n    void main()\r\n    {\r\n        float r = length(v_uv);\r\n        float nalpha = smoothstep(0.7, 0.95, r);\r\n\r\n        vec3 mainColor = vec3(0);\r\n\r\n        if (u_speeding > .5) {\r\n            mainColor = u_speedColor * SPEED_WAVE;\r\n        }\r\n\r\n        gl_FragColor = vec4(mainColor,1.0-nalpha);\r\n    }\r\n\r\n#endif\r\n"},function(n,t,e){"use strict";e.r(t),t.default="precision highp float;\r\n\r\nuniform sampler2D u_tex;\r\nuniform mat4 u_mvp;\r\nuniform vec3 u_color;\r\nuniform vec2 u_dimensions;\r\nuniform float u_fade;\r\n\r\nvarying vec2 v_uv;\r\n\r\n#ifdef VERTEX\r\n\r\n    attribute vec2 a_position;\r\n\r\n    void main()\r\n    {\r\n        vec2 position = a_position * u_dimensions * .015;\r\n        position.y += 15.;\r\n\r\n        gl_Position = u_mvp * vec4(position, -1, 1);\r\n        v_uv = a_position*.5 + .5;\r\n        v_uv.y = 1. - v_uv.y;\r\n    }\r\n\r\n#endif\r\n#ifdef FRAGMENT\r\n\r\n    void main()\r\n    {\r\n\r\n        gl_FragColor = texture2D(u_tex, v_uv);\r\n    }\r\n\r\n#endif\r\n"},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(1),a=e(3),o=e(2),i=e(0).vec2.create();t.drawBackground=function(n,t){r.Camera.getVisibleBoundsSize(t,i),o.drawQuad(n,a.getShaders(n).background,function(e){n.uniform1f(n.getUniformLocation(e,"u_time"),0),n.uniform2f(n.getUniformLocation(e,"u_offset"),t.pos[0],t.pos[1]),n.uniform2fv(n.getUniformLocation(e,"u_viewSize"),i)})}},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(0),a=e(1),o=e(2),i=e(3),u=e(4),s=e(11),c=u.Transform.create(),f=a.Camera.create(),d=r.mat4.create(),l=r.mat4.create(),m=r.mat4.create(),h=r.mat4.create(),v=r.mat4.create(),p=function(){function n(n){this.gl=n}return n.prototype.draw=function(n,t,e){var p=this.gl;if(t.questionReady){f.aspectRatio=n.aspectRatio;var g=a.Camera.getViewMatrix(f,d),M=a.Camera.getProjectionMatrix(f,l),_=r.mat4.mul(m,M,g);c.position[1]=f.viewRadius-5.2,f.aspectRatio<1&&(c.position[1]/=f.aspectRatio);var b=u.Transform.toMatrix(c,h),x=r.mat4.mul(v,_,b);p.blendFunc(p.SRC_ALPHA,p.ONE),o.drawQuad(p,i.getShaders(p).question,function(n){p.activeTexture(p.TEXTURE0),p.bindTexture(p.TEXTURE_2D,t.questionTexture),p.uniform1i(p.getUniformLocation(n,"u_tex"),0),p.uniformMatrix4fv(p.getUniformLocation(n,"u_mvp"),!1,x),p.uniform3f(p.getUniformLocation(n,"u_color"),1,1,1),p.uniform1f(p.getUniformLocation(n,"u_fade"),e),p.uniform2f(p.getUniformLocation(n,"u_dimensions"),s.QUESTION_CANVAS_WIDTH,s.QUESTION_CANVAS_HEIGHT)}),p.blendFunc(p.SRC_ALPHA,p.ONE_MINUS_SRC_ALPHA)}},n}();t.QuestionRenderer=p},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fillImage=function(n,t){var e=n.canvas.width/t.width,r=n.canvas.height/t.height,a=Math.min(e,r),o=t.width*a,i=t.height*a;n.drawImage(t,n.canvas.width/2-o/2,n.canvas.height/2-i/2,o,i)}},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(0),a=e(1),o=e(2),i=e(3),u=e(4),s=e(8),c=e(7),f=u.Transform.create(),d=a.Camera.create(),l=r.mat4.create(),m=r.mat4.create(),h=r.mat4.create(),v=r.mat4.create(),p=r.mat4.create(),g=function(){function n(n){this.gl=n,this.snakeRenderer=new s.SnakeRenderer(n),this.demoSnake=c.Snake.create(),c.Snake.initialize(this.demoSnake),this.demoSnake.scale=1.5;for(var t=0;t<this.demoSnake.segments.length;++t)this.demoSnake.segments[t][1]+=5,this.demoSnake.segments[t][0]+=1.5*.3*(this.demoSnake.segments.length/2-t)}return n.prototype.draw=function(n,t,e){var s=this.gl;f.position[0]=0,f.position[1]=0,f.scale[0]=1,d.aspectRatio=n.aspectRatio;var c=2,g=2,M=2,_=1,b=1;"pressedRestart"===e.menuSubState?M=2+.3*e.menuButtonDecay:"pressedStart"===e.menuSubState?c=2+.3*e.menuButtonDecay:"pressedSkills"===e.menuSubState?g=2+.3*e.menuButtonDecay:"pressedSkinLeft"===e.menuSubState?_=1+.15*e.menuButtonDecay:"pressedSkinRight"===e.menuSubState&&(b=1+.15*e.menuButtonDecay);var x=a.Camera.getViewMatrix(d,l),R=a.Camera.getProjectionMatrix(d,m),S=r.mat4.mul(h,R,x),y=u.Transform.toMatrix(f,v),E=r.mat4.mul(p,S,y);o.drawQuad(s,i.getShaders(s).title,function(n){s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,t.title),s.uniform1i(s.getUniformLocation(n,"u_tex"),0),s.uniformMatrix4fv(s.getUniformLocation(n,"u_mvp"),!1,E),s.uniform3f(s.getUniformLocation(n,"u_color"),1,1,1),s.uniform1f(s.getUniformLocation(n,"u_fade"),1),s.uniform2f(s.getUniformLocation(n,"u_dimensions"),1024,256)});for(var A=0;A<this.demoSnake.segments.length;++A)this.demoSnake.segments[A][1]=5+.01*A*Math.sin(.5*(A-50*e.menuCameraTime));this.demoSnake.colorIndex=e.hero.colorIndex,this.snakeRenderer.drawShadowPass(d,this.demoSnake,0),this.snakeRenderer.drawSnakePass(d,this.demoSnake,0),f.position[0]=-12,u.Transform.toMatrix(f,y),r.mat4.mul(E,S,y),o.drawQuad(s,i.getShaders(s).menuItem,function(n){s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,t.arrow),s.uniform1i(s.getUniformLocation(n,"u_tex"),0),s.uniformMatrix4fv(s.getUniformLocation(n,"u_mvp"),!1,E),s.uniform3f(s.getUniformLocation(n,"u_color"),1,1,1),s.uniform1f(s.getUniformLocation(n,"u_fade"),1),s.uniform1f(s.getUniformLocation(n,"u_scale"),_),s.uniform1f(s.getUniformLocation(n,"u_flip"),-1),s.uniform2f(s.getUniformLocation(n,"u_dimensions"),128,128),s.uniform1f(s.getUniformLocation(n,"u_vertOffset"),5)}),f.position[0]=12,u.Transform.toMatrix(f,y),r.mat4.mul(E,S,y),o.drawQuad(s,i.getShaders(s).menuItem,function(n){s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,t.arrow),s.uniform1i(s.getUniformLocation(n,"u_tex"),0),s.uniformMatrix4fv(s.getUniformLocation(n,"u_mvp"),!1,E),s.uniform3f(s.getUniformLocation(n,"u_color"),1,1,1),s.uniform1f(s.getUniformLocation(n,"u_fade"),1),s.uniform1f(s.getUniformLocation(n,"u_scale"),b),s.uniform1f(s.getUniformLocation(n,"u_flip"),1),s.uniform2f(s.getUniformLocation(n,"u_dimensions"),128,128),s.uniform1f(s.getUniformLocation(n,"u_vertOffset"),5)}),e.playedOnce?(f.position[0]=10,u.Transform.toMatrix(f,y),r.mat4.mul(E,S,y),o.drawQuad(s,i.getShaders(s).menuItem,function(n){s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,t.play),s.uniform1i(s.getUniformLocation(n,"u_tex"),0),s.uniformMatrix4fv(s.getUniformLocation(n,"u_mvp"),!1,E),s.uniform3f(s.getUniformLocation(n,"u_color"),1,1,1),s.uniform1f(s.getUniformLocation(n,"u_fade"),1),s.uniform1f(s.getUniformLocation(n,"u_scale"),M),s.uniform1f(s.getUniformLocation(n,"u_flip"),1),s.uniform2f(s.getUniformLocation(n,"u_dimensions"),256,128),s.uniform1f(s.getUniformLocation(n,"u_vertOffset"),-4)}),f.position[0]=-10,u.Transform.toMatrix(f,y),r.mat4.mul(E,S,y),o.drawQuad(s,i.getShaders(s).menuItem,function(n){s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,e.playedOnce?t.change:t.play),s.uniform1i(s.getUniformLocation(n,"u_tex"),0),s.uniformMatrix4fv(s.getUniformLocation(n,"u_mvp"),!1,E),s.uniform3f(s.getUniformLocation(n,"u_color"),1,1,1),s.uniform1f(s.getUniformLocation(n,"u_fade"),1),s.uniform1f(s.getUniformLocation(n,"u_scale"),c),s.uniform1f(s.getUniformLocation(n,"u_flip"),1),s.uniform2f(s.getUniformLocation(n,"u_dimensions"),256,128),s.uniform1f(s.getUniformLocation(n,"u_vertOffset"),-4)}),f.position[0]=0,u.Transform.toMatrix(f,y),r.mat4.mul(E,S,y)):(f.position[0]=0,u.Transform.toMatrix(f,y),r.mat4.mul(E,S,y),o.drawQuad(s,i.getShaders(s).menuItem,function(n){s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,t.play),s.uniform1i(s.getUniformLocation(n,"u_tex"),0),s.uniformMatrix4fv(s.getUniformLocation(n,"u_mvp"),!1,E),s.uniform3f(s.getUniformLocation(n,"u_color"),1,1,1),s.uniform1f(s.getUniformLocation(n,"u_fade"),1),s.uniform1f(s.getUniformLocation(n,"u_scale"),c),s.uniform1f(s.getUniformLocation(n,"u_flip"),1),s.uniform2f(s.getUniformLocation(n,"u_dimensions"),256,128),s.uniform1f(s.getUniformLocation(n,"u_vertOffset"),-4)})),o.drawQuad(s,i.getShaders(s).menuItem,function(n){s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,t.skills),s.uniform1i(s.getUniformLocation(n,"u_tex"),0),s.uniformMatrix4fv(s.getUniformLocation(n,"u_mvp"),!1,E),s.uniform3f(s.getUniformLocation(n,"u_color"),1,1,1),s.uniform1f(s.getUniformLocation(n,"u_fade"),1),s.uniform1f(s.getUniformLocation(n,"u_scale"),g),s.uniform1f(s.getUniformLocation(n,"u_flip"),1),s.uniform2f(s.getUniformLocation(n,"u_dimensions"),256,128),s.uniform1f(s.getUniformLocation(n,"u_vertOffset"),-13.5)}),f.position[0]=15,f.position[1]=-15,f.scale[0]=.5,d.aspectRatio<.75?(f.position[0]=0,f.position[1]=-22):d.aspectRatio<1&&(f.position[1]/=d.aspectRatio),u.Transform.toMatrix(f,y),r.mat4.mul(E,S,y),o.drawQuad(s,i.getShaders(s).menuItem,function(n){s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,t.more),s.uniform1i(s.getUniformLocation(n,"u_tex"),0),s.uniformMatrix4fv(s.getUniformLocation(n,"u_mvp"),!1,E),s.uniform3f(s.getUniformLocation(n,"u_color"),1,1,1),s.uniform1f(s.getUniformLocation(n,"u_fade"),1),s.uniform1f(s.getUniformLocation(n,"u_scale"),2),s.uniform1f(s.getUniformLocation(n,"u_flip"),1),s.uniform2f(s.getUniformLocation(n,"u_dimensions"),256,128),s.uniform1f(s.getUniformLocation(n,"u_vertOffset"),0)})},n}();t.MenuRenderer=g},function(n,t,e){var r=e(36),a=e(37),o=e(48);n.exports=function(n){return function(t,e,i){return i&&"number"!=typeof i&&a(t,e,i)&&(e=i=void 0),t=o(t),void 0===e?(e=t,t=0):e=o(e),i=void 0===i?t<e?1:-1:o(i),r(t,e,i,n)}}},function(n,t){var e=Math.ceil,r=Math.max;n.exports=function(n,t,a,o){for(var i=-1,u=r(e((t-n)/(a||1)),0),s=Array(u);u--;)s[o?u:++i]=n,n+=a;return s}},function(n,t,e){var r=e(38),a=e(39),o=e(47),i=e(9);n.exports=function(n,t,e){if(!i(e))return!1;var u=typeof t;return!!("number"==u?a(e)&&o(t,e.length):"string"==u&&t in e)&&r(e[t],n)}},function(n,t){n.exports=function(n,t){return n===t||n!=n&&t!=t}},function(n,t,e){var r=e(40),a=e(46);n.exports=function(n){return null!=n&&a(n.length)&&!r(n)}},function(n,t,e){var r=e(13),a=e(9),o="[object AsyncFunction]",i="[object Function]",u="[object GeneratorFunction]",s="[object Proxy]";n.exports=function(n){if(!a(n))return!1;var t=r(n);return t==i||t==u||t==o||t==s}},function(n,t,e){var r=e(42),a="object"==typeof self&&self&&self.Object===Object&&self,o=r||a||Function("return this")();n.exports=o},function(n,t,e){(function(t){var e="object"==typeof t&&t&&t.Object===Object&&t;n.exports=e}).call(this,e(43))},function(n,t){var e;e=function(){return this}();try{e=e||new Function("return this")()}catch(n){"object"==typeof window&&(e=window)}n.exports=e},function(n,t,e){var r=e(14),a=Object.prototype,o=a.hasOwnProperty,i=a.toString,u=r?r.toStringTag:void 0;n.exports=function(n){var t=o.call(n,u),e=n[u];try{n[u]=void 0;var r=!0}catch(n){}var a=i.call(n);return r&&(t?n[u]=e:delete n[u]),a}},function(n,t){var e=Object.prototype.toString;n.exports=function(n){return e.call(n)}},function(n,t){var e=9007199254740991;n.exports=function(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=e}},function(n,t){var e=9007199254740991,r=/^(?:0|[1-9]\d*)$/;n.exports=function(n,t){var a=typeof n;return!!(t=null==t?e:t)&&("number"==a||"symbol"!=a&&r.test(n))&&n>-1&&n%1==0&&n<t}},function(n,t,e){var r=e(49),a=1/0,o=17976931348623157e292;n.exports=function(n){return n?(n=r(n))===a||n===-a?(n<0?-1:1)*o:n==n?n:0:0===n?n:0}},function(n,t,e){var r=e(9),a=e(50),o=NaN,i=/^\s+|\s+$/g,u=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,c=/^0o[0-7]+$/i,f=parseInt;n.exports=function(n){if("number"==typeof n)return n;if(a(n))return o;if(r(n)){var t="function"==typeof n.valueOf?n.valueOf():n;n=r(t)?t+"":t}if("string"!=typeof n)return 0===n?n:+n;n=n.replace(i,"");var e=s.test(n);return e||c.test(n)?f(n.slice(2),e?2:8):u.test(n)?o:+n}},function(n,t,e){var r=e(13),a=e(51),o="[object Symbol]";n.exports=function(n){return"symbol"==typeof n||a(n)&&r(n)==o}},function(n,t){n.exports=function(n){return null!=n&&"object"==typeof n}},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(0),a=e(1),o=e(2),i=e(3),u=e(4),s=u.Transform.create(),c=a.Camera.create(),f=r.mat4.create(),d=r.mat4.create(),l=r.mat4.create(),m=r.mat4.create(),h=r.mat4.create(),v=function(){function n(n){this.gl=n}return n.prototype.draw=function(n,t,e){var v=this.gl;c.aspectRatio=t.aspectRatio;var p=a.Camera.getViewMatrix(c,f),g=a.Camera.getProjectionMatrix(c,d),M=r.mat4.mul(l,g,p);s.position[0]=n[0]*t.viewRadius,s.position[1]=n[1]*t.viewRadius,s.scale[0]=8,s.scale[1]=8;var _=u.Transform.toMatrix(s,m),b=r.mat4.mul(h,M,_);o.drawQuad(v,i.getShaders(v).dpad,function(n){v.activeTexture(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,e.dpad),v.uniform1i(v.getUniformLocation(n,"u_tex"),0),v.uniformMatrix4fv(v.getUniformLocation(n,"u_mvp"),!1,b),v.uniform3f(v.getUniformLocation(n,"u_color"),1,1,1),v.uniform1f(v.getUniformLocation(n,"u_fade"),1),v.uniform2f(v.getUniformLocation(n,"u_dimensions"),1024,256)})},n}();t.DPadRenderer=v},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function n(n){this.bindings=[],this.thisArg=n}return n.prototype.bind=function(n,t,e){var r={target:n,event:t,listener:e.bind(this.thisArg)};n.addEventListener(t,r.listener),this.bindings.push(r)},n.prototype.unbindAll=function(){this.bindings.forEach(function(n){return n.target.removeEventListener(n.event,n.listener)}),this.bindings.length=0},n}();t.EventBinder=r},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(0),a=e(7),o=e(10),i=e(15),u=r.vec2.create(),s=0;t.NUM_BEANS=2e3;var c=function(){for(var n=i.PLAY_AREA_RADIUS-10,t=r.vec2.fromValues(1e4,1e4);;){r.vec2.set(t,n-2*n*Math.random(),n-2*n*Math.random());var e=r.vec2.sqrLen(t);if(e<n*n&&e>100)break}return t};t.Bean={create:function(){var n=Math.random()<.25?Math.floor(4*Math.random()):-1;return{id:s++,position:c(),size:n>=0?2+Math.random():1+Math.random(),spinOffset:1e3*Math.random(),colorIndex:Math.floor(6*Math.random()),answerIndex:n,collected:!1}},createNewAnswer:function(n,e,a){for(var i=t.Bean.create(),s=0;s<10&&o.BeanRenderer.beanVisibleAtPosition(e,i.position,i.size);++s)i.position=c();var f=1e9,d=a[0];for(s=0;s<a.length;++s)if(!(a[s].answerIndex<0)){var l=r.vec2.sqrDist(i.position,a[s].position);l<f&&(f=l,d=a[s])}return r.vec2.sub(u,i.position,d.position),r.vec2.normalize(u,u),r.vec2.scale(u,u,3),r.vec2.add(i.position,i.position,u),i},clone:function(n){return t.Bean.copy(t.Bean.create(),n)},copy:function(n,e){return t.Bean.lerp(n,e,e,0)},lerp:function(n,t,e,a){return r.vec2.lerp(n.position,t.position,e.position,a),n.id=e.id,n.size=e.size,n.spinOffset=e.spinOffset,n.colorIndex=e.colorIndex,n.answerIndex=e.answerIndex,n.collected=e.collected,n},updateInPlace:function(n,t,e,o,i,s){var c=r.vec2.sub(u,t.segments[0],n.position),f=r.vec2.sqrLen(c);if(f<5.2*5.2*t.scale*t.scale){var d=Math.sqrt(f);if(d<1.4*t.scale){if(n.collected=!0,n.answerIndex<0||n.answerIndex===o.answerIndex)a.Snake.addSegments(t,n.answerIndex>=0),t.botTarget=Math.random()>.1?-1:0;else{if(!(t.segments.length>=10))return!1;s(t),a.Snake.chopInHalf(t)}return i&&n.answerIndex>=0&&o.answerQuestion(n.answerIndex),i&&console.log(t.segments.length,t.scale),!0}var l=.18*(1-d/(5.2*t.scale));r.vec2.normalize(c,c),r.vec2.scale(c,c,l),r.vec2.add(n.position,n.position,c)}return!0}}},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(7),a=e(0),o=a.vec2.create(),i=a.vec2.create(),u=a.vec2.create(),s=(a.vec2.create(),[{wrongAnswerRepel:20,snakeHeadRepel:50,snakeMiddleRepel:50,snakeTailRepel:50,heroHeadRepel:0,heroMiddleRepel:-1e4,heroTailRepel:0},{wrongAnswerRepel:30,snakeHeadRepel:0,snakeMiddleRepel:10,snakeTailRepel:10,heroHeadRepel:15,heroMiddleRepel:15,heroTailRepel:-30}]);t.Bot={create:function(n,t){var e=r.Snake.create(0);r.Snake.initialize(e),e.personalityIndex=t?0:1;var o=t?-35:200*Math.random();t&&(n=Math.PI);for(var i=0;i<e.segments.length;++i)e.segments[i][0]+=(50+o)*Math.cos(n),e.segments[i][1]+=(50+o)*Math.sin(n);var u=Math.random(),s=t?15:50*u*u;s>42&&(s*=2);for(i=0;i<s;++i)e.segments.push(a.vec2.clone(e.segments[e.segments.length-1]));return r.Snake.expandToLength(e,2*Math.random()*Math.PI),e},respawn:function(n,t){if(t){var e=50*Math.random();n.segments.length=20,a.vec2.copy(o,t),a.vec2.normalize(o,o),0===n.personalityIndex&&(n.personalityIndex=1);for(var r=0;r<n.segments.length;++r)n.segments[r]=a.vec2.create(),n.segments[r][0]=-(25+e)*o[0],n.segments[r][1]=-(25+e)*o[1];n.alive=!1}else n.segments=[]},move:function(n,t,e){n.alive||(n.alive=!0);var c=o,f=i,d=1e9,l=0,m=s[n.personalityIndex];a.vec2.set(f,0,0);for(var h=n.botTarget>=0?n.botTarget:e.answerIndex,v=0;v<t.beans.length;++v)if(!t.beans[v].collected){var p=a.vec2.sub(u,n.segments[0],t.beans[v].position),g=a.vec2.sqrLen(p);t.beans[v].answerIndex==h?g<d&&(d=g,l=v):(a.vec2.normalize(p,p),a.vec2.scaleAndAdd(f,f,p,m.wrongAnswerRepel/g))}for(v=0;v<t.bots.length;++v)if(t.bots[v]!==n){var M=a.vec2.sub(u,n.segments[0],t.bots[v].segments[0]),_=a.vec2.sqrLen(M);a.vec2.normalize(M,M),a.vec2.scaleAndAdd(f,f,M,Math.min(1,m.snakeHeadRepel/_)),M=a.vec2.sub(u,n.segments[0],t.bots[v].segments[Math.floor(t.bots[v].segments.length/2)]),_=a.vec2.sqrLen(M),a.vec2.normalize(M,M),a.vec2.scaleAndAdd(f,f,M,Math.min(1,m.snakeMiddleRepel/_)),M=a.vec2.sub(u,n.segments[0],t.bots[v].segments[t.bots[v].segments.length-1]),_=a.vec2.sqrLen(M),a.vec2.normalize(M,M),a.vec2.scaleAndAdd(f,f,M,Math.min(1,m.snakeTailRepel/_))}if(t.hero.segments.length>0){M=a.vec2.sub(u,n.segments[0],t.hero.segments[0]),_=a.vec2.sqrLen(M);a.vec2.normalize(M,M),a.vec2.scaleAndAdd(f,f,M,Math.min(1,m.heroHeadRepel/_)),M=a.vec2.sub(u,n.segments[0],t.hero.segments[Math.floor(t.hero.segments.length/2)]),_=a.vec2.sqrLen(M),a.vec2.normalize(M,M),a.vec2.scaleAndAdd(f,f,M,Math.min(1,m.heroMiddleRepel/_)),M=a.vec2.sub(u,n.segments[0],t.hero.segments[t.hero.segments.length-1]),_=a.vec2.sqrLen(M),a.vec2.normalize(M,M),a.vec2.scaleAndAdd(f,f,M,Math.min(1,m.heroTailRepel/_))}a.vec2.sub(c,t.beans[l].position,n.segments[0]),a.vec2.normalize(c,c),a.vec2.add(c,c,f),a.vec2.add(c,c,n.segments[0]),n.botSpeeding?Math.random()<.05&&(n.botSpeeding=!1):Math.random()<.01&&(n.botSpeeding=!0);var b=n.botSpeeding||0===n.personalityIndex;r.Snake.updateInPlace(n,c,b)}}},function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadTexture=function(n,t,e,r){return void 0===e&&(e="linear"),void 0===r&&(r="repeat"),new Promise(function(a,o){var i=new Image;i.onload=function(){var t=n.createTexture();n.bindTexture(n.TEXTURE_2D,t),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,i);var o="linear"===e?n.LINEAR:n.NEAREST,u="repeat"===r?n.REPEAT:n.CLAMP_TO_EDGE;n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,o),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,o),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,u),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,u),a(t)},i.src=t})}}]);
//# sourceMappingURL=bundle.js.map